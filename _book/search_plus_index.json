{"./":{"url":"./","title":"简介","keywords":"","body":"简介 云锁是服务器必备安全防护及运维管理SAAS解决方案，是一款CS架构进行管理的产品，通过PC端支持windows/linux服务器跨平台实时、批量、远程安全管理。云锁会7*24小时无间断守护业务系统，持续对企业业务系统进行学习并识别业务的风险点，通过防御模块减少风险面，在检测到未知威胁和业务资产变更时，能自动调整安全策略,帮助用户有效抵御CC攻击、SQL注入、XSS跨站攻击、溢出攻击、暴力破解、提权等黑客攻击，及病毒、木马、后门等恶意代码。发生安全事件后，云锁能自动回溯攻击过程，并形成事件分析报告，为企业提供入侵取证及攻击源分析的能力。进而形成“业务资产管理 - 风险识别 - 安全防御 - 威胁感知 - 攻击事件回溯”的一体化安全防御体系。 云锁作为一款SAAS化的服务器安全软件，即提供免费的基础功能，也为企业级客户提供边界管理、攻击溯源等增值计费功能。 基础功能 增值功能 基础功能 增值功能 增值功能 费用 基础资源 10.00 元 / 台 高级防护 150.00 元 / 月 / 台 实时监控 3.00 元 / 月 / 账户 网站性能监控 3.00 元 / 月 / 账户 边界管理 1000.00 元 / 月 / 账户 事件管理 150.00 元 / 月 / 账户 "},"guide/":{"url":"guide/","title":"入门指南","keywords":"","body":"入门指南 本章主要介绍云锁的安装；各防护插件安装方法，包括Nginx/Tengine插件安装、卸载；Java类WebServer的安装；以及Linux当前支持的内核版本和云锁增值项说明。 "},"guide/Compat.html":{"url":"guide/Compat.html","title":"云锁兼容性说明","keywords":"","body":"云锁兼容性说明 支持的操作系统 服务器端 PC控制端 Web中间件 Linux面板 云锁支持的系统 服务器端 Windows: Windows Server 2003 SP2（x86/x64）、Windows Server 2008（x86/x64）、Windows Server 2012 Linux: RedHat 5.0~RedHat 5.11（x86/x64）、RedHat 6.0~RedHat 6.7（x86/x64）、RedHat 7.0~RedHat 7.4 CentOS 5.0~CentOS 5.11（x86/x64）、CentOS 6.0~CentOS 6.7（x86/x64）、CentOS 7.0~CentOS 7.5 Ubuntu（x86/x64） Suse 10~Suse 10 sp3（x86/x64）、Suse 11~Suse 11 sp3（x86/x64）、Suse 12 点击查看对应内核版本 控制端 Windows XP SP3 及以上 云锁支持的中间件 IIS 6/IIS 7/IIS 7.5/IIS 8 Apache 2.2/Apache 2.4（x86、x64） Nginx 1.0.*、Nginx 1.2.*、Nginx 1.4.*、Nginx 1.6.*~Nginx 1.13.* kangle Tomcat、Weblogic、WebSphere、TongWeb、Jboss等 云锁支持的面板 Wdcp/BT/AMH/Cpanel/zpanel/virualmin/lumanager "},"guide/install/":{"url":"guide/install/","title":"云锁安装说明","keywords":"","body":"云锁安装说明 云锁为了节省服务器端资源占用，采用了CS架构的方式进行管理。需要安装服务器端和PC端，通过PC端进行管理。 "},"guide/install/Windows.html":{"url":"guide/install/Windows.html","title":"Windows 服务器端","keywords":"","body":"Windows服务器端安装说明 [warning] 注意 安装前需要保证服务器端与云锁云中心的443端口通信保持畅通，可以通过命令telnet apiv3.yunsuo.com.cn 443检查是否连通，连通则按照下面步骤进行安装；如不通则检查防火墙规则或云主机安全策略，将入站的443端口放开。PS：提示telnet未安装可通过百度查询安装方法。 访问云锁官网，进入下载页面将Windows服务器端下载到服务器上。如有其它安全产品，需临时关闭其防护进行安装，安装完成后再开启防护。 下载完成后进行安装，在安装界面选择安装路径及云锁的监听端口，如不需要修改则以默认值进行安装。 安装过程中在安装网络层驱动时，会出现网络闪断几秒钟，安装完成后网络会自动恢复。 安装完成后会弹出加入云中心的页面，已经注册了云锁云中心账号，则输入账号和密码；如未注册则点击“立即注册”进行注册，注册成功后加入云中心；或“跳过”以后通过PC端将服务器添加到云中心进行管理。 由于云锁为了节省服务器端资源占用，采用了CS架构的方式进行管理。所以安装完成后没有界面，只在任务管理器中显示云锁进程，需安装PC端进行管理。 "},"guide/install/Linux.html":{"url":"guide/install/Linux.html","title":"Linux 服务器端","keywords":"","body":"Linux服务器端安装说明 [warning] 注意 安装前需要保证服务器端与云锁云中心的443端口通信保持畅通，可以通过命令telnet apiv3.yunsuo.com.cn 443检查是否连通，连通则按照下面步骤进行安装；如不通则检查防火墙规则或云主机安全策略，将入站的443端口放开。PS：提示telnet未安装可通过百度查询安装方法。 环境检查 安装 快速安装 分步安装 查看云锁是否运行 云锁相关命令 卸载 环境检查 检查并关闭selinux，否则无法安装云锁；如已关闭则忽略此步骤。 1) 检查selinux状态 # getenforce ##如果显示参数为disabled则为成功关闭 2） 关闭selinux。修改/etc/sysconfig/selinux文件，将enforcing改为disabled，重启服务器。如已经是disabled则直接重启服务器。 # vim /etc/sysconfig/selinux 安装云锁 注意：如曾经下载过云锁安装包，则将旧的云锁安装包及安装目录删除（rm -rf yunsuo_*）后再安装。 快速安装 x86：wget http://download.yunsuo.com.cn/v3/yunsuo_agent_32bit.tar.gz && tar xvzf yunsuo_agent_32bit.tar.gz && chmod +x yunsuo_install/install && yunsuo_install/install x64：wget http://download.yunsuo.com.cn/v3/yunsuo_agent_64bit.tar.gz && tar xvzf yunsuo_agent_64bit.tar.gz && chmod +x yunsuo_install/install && yunsuo_install/install 分步安装 下载云锁安装包。x86：wget http://download.yunsuo.com.cn/v3/yunsuo_agent_32bit.tar.gz` x64：wget http://download.yunsuo.com.cn/v3/yunsuo_agent_64bit.tar.gz 解压文件，得到安装包文件。x86：tar zxvf yunsuo_agent_32bit.tar.gz x64：tar zxvf yunsuo_agent_64bit.tar.gz 给云锁安装文件赋予可执行权限。chmod +x yunsuo_install/install 执行安装，直到提示“Install Yunsuo Success.”安装完成。 yunsuo_install/install 添加服务器到云中心。 /usr/local/yunsuo_agent/agnet_smart_tool.sh -u cloud_name -p cloud_passwd 说明:cloud_name：云中心账户名；cloud_passwd：云中心登录密码 安装完成后通过PC端进行管理。 查看云锁是否运行 ps -ef | grep yunsuo_agent 云锁服务相关命令 云锁启动/停止/重启/状态 service yunsuo start/stop/restart/status /etc/init.d/yunsuo start/stop/restart/status 卸载云锁 /usr/local/yunsuo_agent/uninstall "},"guide/install/PC.html":{"url":"guide/install/PC.html","title":"PC 端","keywords":"","body":"PC端安装说明 访问云锁官网，进入下载页面将PC端下载到远程端（PC机或者笔记本）上。下载完成后进行安装，在安装界面选择安装路径。如不需要修改则以默认路径进行安装。 安装成功后，通过注册的云中心账号登录客户端，就可以对Linux和Windows服务器端进行管理。 "},"guide/Nginx.html":{"url":"guide/Nginx.html","title":"Nginx/Tengine 自编译说明","keywords":"","body":"Nginx/Tengine 自编译说明 安装云锁的时候，云锁会自动适配nginx版本，使用我们已经预编译好的包含防护模块的nginx文件替换掉您当前系统中使用的nginx文件。卸载时，会将备份的系统原始nginx文件替换回来。因此，云锁可保护使用nginx搭建的网站，开创了这个领域的先河。 当nginx更新或用户的nginx添加（--add-moudel）了第三方模块时需要用户手工加载云锁的防护模块进行防护。通常在安装时云锁会提示存在第三方模块，且PC端也会有显示需要编译。 安装防护模块 卸载防护模块 常见问题 安装 建议：在安装防护模块前先重启一次Nginx的服务，确保业务重启后可以正常运行，然后再安装云锁防护模块。 编译前先将已经安装的Nginx文件进行备份，通过ps命令查看nginx文件的路径。以下所有步骤都以自身nginx路径为准。 # ps -elf | grep nginx # cd /usr/local/nginx/sbin/ # cp nginx nginx.bak 过步骤1查看的路径跟-v参数查看当前Nginx版本，如有源码包则忽略此步骤。无源码包则到Nginx官网下载Nginx源码包，源码包需与自己的当前Nginx版本匹配（假设当前Nginx版本为1.10）。宝塔面板Nginx源码路径：/www/server/nginx/src/；Oneinstack的Nginx源码路径在oneinstack目录下：oneinstack/src/。 # /usr/local/nginx/sbin/nginx -v # wget http://nginx.org/download/nginx-1.10.1.tar.gz 解压nginx源码包 # tar zxvf nginx-1.10.1.tar.gz 由于其默认不支持post过滤，所以需要修改Nginx文件。1.8.0 版本以下修改源码目录下ngx_http_upstream.c文件（Nginx 1.8.0 及以上版本和Tengine跳过该步骤）。在static void ngx_http_upstream_init_request(ngx_http_request_t \\*r);行上方添加：int ngx_http_yunsuo_post_in_handler(ngx_http_request_t *r);和在ngx_http_upstream_init_request后，添加： if (ngx_http_yunsuo_post_in_handler(r)) { return; } # cd nginx-1.10.1/src/http/ # vi ngx_http_upstream.c --------------------下面这段是添加的---------------- int ngx_http_yunsuo_post_in_handler(ngx_http_request_t *r); -------------------------------------------------- static void ngx_http_upstream_init_request(ngx_http_request_t *r) { ngx_str_t *host; ngx_uint_t i; ngx_resolver_ctx_t *ctx, temp; ngx_http_cleanup_t *cln; ngx_http_upstream_t *u; ngx_http_core_loc_conf_t *clcf; ngx_http_upstream_srv_conf_t *uscf, **uscfp; ngx_http_upstream_main_conf_t *umcf; --------------------下面这段是添加的---------------- if (ngx_http_yunsuo_post_in_handler(r)) { return; } -------------------------------------------------- if (r->aio) { return; } 下载云锁防护模块压缩包 # cd /root/ # wget https://codeload.github.com/yunsuo-open/nginx-plugin/zip/master -O nginx-plugin-master.zip 解压云锁防护模块压缩包nginx-plugin-master.zip # unzip nginx-plugin-master.zip 获取当前云锁模块所在目录的全路径 # cd nginx-plugin-master/ # pwd 查看当前nginx加载的模块，在编译加载云锁防护模块的时候仍需加载这些模块 # /usr/local/nginx/sbin/nginx –V 进入nginx源码目录，对nginx进行编译；编译时在第8步获取的nginx原有模块后添加云锁防护模块，模块路径为第7步获取的云锁防护模块源码全路径“/root/nginx-plugin-master” # cd nginx-1.10.1/ # ./configure --prefix=/usr/local/nginx --with... --add-module=/root/nginx-plugin-master Nginx1.8.0 以上和 Tengine 2.1.2 则需要修改objs/Makefile文件和objs/ngx_modules.c来支持post过滤和内容过滤。 首先，在Makefile文件中的CFLAGS=...-Werror -g后追加宏定义 -DHIGHERTHAN8 # vi objs/Makefile CFLAGS = -pipe -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g -DHIGHERTHAN8 其次，将ngx_modules.c中的&ngx_http_yunsuo_module,向下移动到ngx_http_userid_filter_module和ngx_http_headers_filter_module之间。(已在此之间的则可忽略) # vi objs/ngx_modules.c ngx_module_t *ngx_modules[] = { &ngx_core_module, ...... &ngx_http_upstream_keepalive_module, &ngx_http_upstream_zone_module, -----------下面这行向下移动---------------- &ngx_http_yunsuo_module, ------------------------------------------ &ngx_http_stub_status_module, ...... &ngx_http_headers_filter_module, ---------------移动到该位置----------------- &ngx_http_yunsuo_module, ------------------------------------------- &ngx_http_copy_filter_module, &ngx_http_range_body_filter_module, &ngx_http_not_modified_filter_module, NULL }; char *ngx_module_names[] = { \"objs/ngx_modules.c\" 186L, 6441C ...... }; configure完成后进行make（如原本无nginx，make后还需make install） # make make完成后将系统中原有的nginx用重新编译生成的nginx文件替换，替换后重启nginx使新编译nginx生效 # rm -rf /usr/local/nginx/sbin/nginx # cp objs/nginx /usr/local/nginx/sbin/ # service nginx restart 到此通过PC端连接到服务器端，在PC端的界面上可以看到已识别nginx插件。 卸载 使用nginx.bak文件替换掉自编译的nginx文件，替换后重启Nginx # cd /usr/local/nginx/sbin/ # rm -rf nginx # mv nginx.bak nginx # service nginx restart 删除文件 手动删除或者重命名/usr/local/yunsuo_agent/nginx/目录下的 libnginx_plugin.so（此操作需要关闭云锁自保护功能）， 重启nginx服务即可\"service nginx restart\"。 FAQ 什么情况下需要自己编译云锁的nginx模块？ 1） 当您的nginx使用了第三方或者自己开发的模块的时候，需要编译云锁的nginx模块。您可以通过nginx -V命令查看输出的信息里是否包含了--add-module=的字样 (例如：--add-module=../ngx_cache_purge-1.3说明使用了ngx_cache_purge-1.3第三方模块) 2） 当使用tengine的时候，需要编译云锁的nginx模块 3） 当前使用的nginx版本比云锁适配的nginx版本高的时候，需要自己编译云锁的nginx模块 卸载云锁后nginx需要重新编译吗？ 不需要，云锁的nginx模块会判断防护模块是否安装，如果不安装则不生效。当然您也可以替换回之前的nginx 编译时可能出现的几种错误解决方法 1）遇如下错误信息 ： cc1: all warnings being treated as errors， 编译器把 警告信息作为错误处理了 解决： 修改 objs/Makefile 把CFLAGS = -pipe -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g修改为：CFLAGS = -pipe -O -W -Wall -Wpointer-arith -Wno-unused-parameter -g即去掉-Werror选项 重新 make， 注意是重新make 而不是重新 ./configure 2) 遇如下错误信息：undefined reference to `dlclose'，由于编译器版本过高，需要在链接时，加入-ldl 选项 解决： 修改 objs/Makefile 搜索 -lpthread，定位到该行结束，加入 -ldl 形如 -lpthread -lcrypt 修改为 -lpthread -lcrypt -ldl 重新 make，注意是重新make而不是重新./configure ``` "},"guide/rasp/":{"url":"guide/rasp/","title":"RASP 使用说明","keywords":"","body":"RASP 使用说明 [warning] 注意： 由于安装完成后需重启Web服务，所以线上业务尽量选取在用户访问量较少的时段内安装。同时建议安装前重启一次Web的服务，确保业务重启后可以正常运行，然后再安装云锁防护模块。 JSPAgent主要针对Struts2漏洞（远程执行和文件上传）、WebLogic对象反序列化漏洞、命令执行漏洞、任意文件读取漏洞、文件上传漏洞、SQL注入漏洞和WebShell等漏洞进行识别及防护。 目录结构 安装说明 升级说明 目录结构 安装时，云锁安装包会提供一个名为JspAgent的目录，目录结构为 Windows： /jspAgent/JSPAgent.jar、/jspAgent/JSPAgent.dll、/jspAgent/msvcp100.dll、/jspAgent/msvcr100.dll、/jspAgent/litexml.dll、/jspAgent/x64/JSPAgent.dll、/jspAgent/x64/msvcp100.dll、/jspAgent/x64/msvcr100.dll、/jspAgent/x64/litexml.dll Linux： /jspAgent/JSPAgent.jar、/jspAgent/libJSPAgent.so、/jspAgent/liblitexml_linux.so 安装说明 Tomcat/Tomee 安装 Weblogic 安装 Jboss/wildfly 安装 Glassfish 安装 TongWeb 安装 Jetty 安装 升级说明 当JspAgent更新时，云锁会在更新公告中进行说明；除此外云锁安装后在JspAgent生成一个记录文件md5的文档，当更新后的文档中md5值与原文件中的md5值不一致时也表示JspAgent更新了。更新时需按照以下步骤进行： 暂停当前运行的Java服务 用云锁目录下的JspAgent目录替换掉Java路径下的JspAgent目录，具体方法参照安装步骤。 启动Java服务 "},"guide/rasp/Tomcat.html":{"url":"guide/rasp/Tomcat.html","title":"Tomcat/Tomee 安装","keywords":"","body":"Tomcat/Tomee安装 [info] 建议 安装前重启一次Web的服务，确保业务重启后可以正常运行，然后再安装云锁防护模块；同时将要修改的配置文件进行备份。 Web容器使用的Java（jdk或jre）的版本需 1.6 及以上。 Windows安装说明 官网Tomcat JTM套件 其它版本 Linux安装说明 Windows 官网Tomcat 假设 tomcat 工作目录：CATALINA_HOME =C:\\Program Files\\Apache Software Foundation\\Tomcat 6.0 1）拷贝JspAgent目录到%CATALINA_HOME%下。 2）修改JAVA启动参数：注册表中Options的值 x86:HKEY_LOCAL_MACHINE\\SOFTWARE\\Apache Software Foundation\\Procrun 2.0\\tomcat6\\Parameters\\Java x64:HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Apache Software Foundation\\Procrun 2.0\\tomcat6\\Parameters\\Java 修改如下 -Dcatalina.home=C:\\Program Files\\Apache Software Foundation\\Tomcat 6.0 -Dcatalina.base=C:\\Program Files\\Apache Software Foundation\\Tomcat 6.0 -Djava.endorsed.dirs=C:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\endorsed -Djava.io.tmpdir=C:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\temp -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file=C:\\Program Files\\Apache Software Foundation\\Tomcat6.0\\conf\\logging.properties ------追加下面这一行--- -javaagent:C:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\jspAgent\\JSPAgent.jar 3）重启 tomcat。 JTM套件 假定tomcat的工作目录：CATALINA_HOME=C:\\JTM\\tomcat 1）拷贝jspAgent目录到%CATALINA_HOME%下。 2）修改JAVA启动参数：%CATALINA_HOME%\\bin\\service.bat中，定位++JvmOptions，追加-javaagent:%CATALINA_HOME%\\jspAgent\\JSPAgent.jar; 形如 ： \"%EXECUTABLE%\" //US//%SERVICE_NAME% ++JvmOptions \"-Djava.io.tmpdir=%CATALINA_BASE%\\temp;-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager;-Djava.util.logging.config.file=%CATALINA_BASE%\\conf\\logging.properties\" --JvmMs 128 --JvmMx 512 --Startup=auto 修改为 ： \"%EXECUTABLE%\" //US//%SERVICE_NAME% ++JvmOptions \"*-javaagent:%CATALINA_HOME%\\jspAgent\\JSPAgent.jar;*-Djava.io.tmpdir=%CATALINA_BASE%\\temp;-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager;-Djava.util.logging.config.file=%CATALINA_BASE%\\conf\\logging.properties\" --JvmMs 128 --JvmMx 512 --Startup=auto 3）重启 tomcat 。 其他版本 观察tomcat的启动脚本，如果最终调用了%CATALINA_HOME%/bin/catalina.bat，那么可以在这个文件中修改，定位到：execCmd，在其下追加一行： set JAVA_OPTS=-javaagent:%CATALINA_HOME%\\jspAgent\\JSPAgent.jar %JAVA_OPTS% Linux 假设tomcat的工作目录为：CATALINA_HOME=/usr/local/tomcat/ 1）拷贝jspAgent目录到${CATALINA_HOME}下。 2）修改${CATALINA_HOME}/bin/catalina.sh中的JAVA启动参数，附加上-javaagent选项。过程如下：定位到elif [ \"$1\" = \"start\" ]; then，其下追加一行：JAVA_OPTS=\"-javaagent:${CATALINA_HOME}/jspAgent/JSPAgent.jar ${JAVA_OPTS}\" 3）重启tomcat。 "},"guide/rasp/Weblogic.html":{"url":"guide/rasp/Weblogic.html","title":"Weblogic 安装","keywords":"","body":"Weblogic安装 **[info] 建议 安装前重启一次Web的服务，确保业务重启后可以正常运行，然后再安装云锁防护模块；同时将要修改的配置文件进行备份。 Web容器使用的Java（jdk或jre）的版本需 1.6 及以上。 Windows安装说明 Linux安装说明 Windows 1）拷贝jspAgent目录到%DOMAIN_HOME%下。 2）修改%DOMAIN_HOME%\\bin\\startWebLogic.cmd， 定位到 set JAVA_OPTIONS=%SAVE_JAVA_OPTIONS%， 在其下追加一行：set JAVA_OPTIONS=-javaagent:%DOMAIN_HOME%\\jspAgent\\JSPAgent.jar %JAVA_OPTIONS% 3）重启 WebLogic。 Linux 1）首先获取startWebLogic.sh位置： # ps -elf | grep startWebLogic.sh /bin/sh ./root/wls12130/user_projects/domains/mydomain/startWebLogic.sh /bin/sh /root/wls12130/user_projects/domains/mydomain/bin/startWebLogic.sh 由此确定工作目录为：DOMAIN_HOME =/root/wls12130/user_projects/domains/mydomain 2）拷贝jspAgent目录到${DOMAIN_HOME}下。 3）修改${DOMAIN_HOME}/bin/startWebLogic.sh中JAVA启动参数，定位到 JAVA_OPTIONS=\"${SAVE_JAVA_OPTIONS}，其下追加一行：JAVA_OPTIONS=\"-javaagent:${DOMAIN_HOME}/jspAgent/JSPAgent.jar ${JAVA_OPTIONS}\" 4）重启weblogic。 "},"guide/rasp/Jboss.html":{"url":"guide/rasp/Jboss.html","title":"Jboss/wildfly 安装","keywords":"","body":"Jboss/wildfly安装 [info] 建议 安装前重启一次Web的服务，确保业务重启后可以正常运行，然后再安装云锁防护模块；同时将要修改的配置文件进行备份。 Web容器使用的Java（jdk或jre）的版本需 1.6 及以上。 Windows安装说明 Linux安装说明 Windows 1）拷贝jspAgent目录到%JBOSS_HOME%下。 2）根据你自己的使用模式，修改%JBOSS_HOME %/bin/standalone.bat或者%JBOSS_HOME %/bin/domain.bat中JAVA启动参数，定位到:RESTART，在其上进行添加。 如:RESTART下\"%JAVA%\" %JAVA_OPTS%，则添加set \"JAVA_OPTS=-javaagent:C:\\jspAgent\\JSPAgent.jar %JAVA_OPTS%\" 如:RESTART下\"%JAVA%\" %PROCESS_CONTROLLER_JAVA_OPTS%，则添加set \"PROCESS_CONTROLLER_JAVA_OPTS=-javaagent:C:\\jspAgent\\JSPAgent.jar %PROCESS_CONTROLLER_JAVA_OPTS%\" 注意：\"%JAVA%\"后的参数不是固定的，配置文件中\"%JAVA%\"跟着是什么参数，在添加的时候set后面就跟着什么参数。 3）重启Jboss。 Linux 假设Jboss工作目录：JBOSS_HOME=/root/jboss-as-7.1.1.Final 1）拷贝jspAgent目录到$JBOSS_HOME下。 2）根据你自己的使用模式，修改$JBOSS_HOME/bin/standalone.sh或者 $JBOSS_HOME/bin/domain.sh中JAVA启动参数，定位字符串# Display our environment，在其上追加一行：JAVA_OPTS=\"-javaagent:$JBOSS_HOME/jspAgent/JSPAgent.jar $JAVA_OPTS\" 3）重启Jboss。 "},"guide/rasp/Glassfish.html":{"url":"guide/rasp/Glassfish.html","title":"Glassfish 安装","keywords":"","body":"Glassfish安装 [info] 建议 安装前重启一次Web的服务，确保业务重启后可以正常运行，然后再安装云锁防护模块；同时将要修改的配置文件进行备份。 Web容器使用的Java（jdk或jre）的版本需 1.6 及以上。 Windows安装说明 Linux安装说明 Windows 假设Glassfish的工作目录：GLASSFISH\\_HOME=C:\\glassfish4 1）拷贝jspAgent目录到%GLASSFISH\\_HOME%下。 2）登录Glassfish控制台：https://IP:4848，Configurations->server-config->JVM]Settings-> JVM Options->Add JVM Option，新增一项：-javaagent: C:\\glassfish4\\jspAgent\\JSPAgent.jar 3）重启 Glassfish。 Linux 假设Glassfish的工作目录：GLASSFISH_HOME= /usr/local/glassfish/glassfish 1）拷贝jspAgent目录到${GLASSFISH\\_HOME}下。 2）登录Glassfish控制台https://IP:4848,Configurations-> server-config->JVM Settings->JVM Options->Add JVM Option,新增一项：-javaagent:/usr/local/glassfish/glassfish/jspAgent/JSPAgent.jar 3）重启Glassfish。 "},"guide/rasp/TongWeb.html":{"url":"guide/rasp/TongWeb.html","title":"TongWeb 安装","keywords":"","body":"TongWeb安装 **[info] 建议 安装前重启一次Web的服务，确保业务重启后可以正常运行，然后再安装云锁防护模块；同时将要修改的配置文件进行备份。 Web容器使用的Java（jdk或jre）的版本需 1.6 及以上。 Windows安装说明 Linux安装说明 Windows 假定 TongWeb 的工作目录：TWNS_HOME=C:\\TongWeb5.0 1）拷贝jspAgent目录到%TWNS_HOME%下。 2）登录控制台：http://IP:9060/twns， 服务器配置->启动参数，新增一项：-javaagent:%TWNS_HOME%\\jspAgent\\JSPAgent.jar或绝对路径的写法：-javaagent:\"C:\\TongWeb5.0\\jspAgent\\JSPAgent.jar 3）重启TongWeb。 Linux 假设TongWeb工作目录：TWNS_HOME=/root/TongWeb5.0 1）拷贝jspAgent目录到${TWNS_HOME}下。 2）登录控制台：http://IP:9060/twns， 服务器配置->启动参数，新增一项: -javaagent:${TWNS_HOME}/jspAgent/JSPAgent.jar 3）重启TongWeb。 "},"guide/rasp/Jetty.html":{"url":"guide/rasp/Jetty.html","title":"Jetty 安装","keywords":"","body":"Jetty安装 [info] 建议 安装前重启一次Web的服务，确保业务重启后可以正常运行，然后再安装云锁防护模块；同时将要修改的配置文件进行备份。 Web容器使用的Java（jdk或jre）的版本需 1.6 及以上。 Windows安装说明 Linux安装说明 Windows 假定Jetty的工作目录：JETTY_HOME= C:/Program Files (x86)/jetty-distribution-8.1.17/jetty-distribution-8.1.17.v20150415 1）拷贝jspAgent目录到%JETTY_HOME%下。 2） 启动命令修改：java -jar %JETTY_HOME%\\start.jar修改为java -javaagent:%JETTY_HOME%\\jspAgent\\JSPAgent.jar -jar %JETTY_HOME%\\start.jar Linux 假设Jetty的工作目录：JETTY_HOME=/usr/local/jetty 1）拷贝jspAgent目录到$JETTY_HOME下。 2）启动命令修改：java -jar $JETTY_HOME/start.jar修改为java -javaagent:$JETTY_HOME/jspAgent/JSPAgent.jar -jar $JETTY_HOME/start.jar "},"guide/kernel/":{"url":"guide/kernel/","title":"Linux 支持内核版本","keywords":"","body":"Linux 支持内核版本 由于Linux系统的特殊性，云锁对于Linux系统的支持主要以内核版本为主，即\"uname -a\"所显示的版本信息；而不以系统的版本信息为支持标准。 以下表格中为当前云锁支持的Linux系统内核版本，安装时请进行参考。 CentOS/RedHat 内核版本 SUSE 内核版本 Ubuntu 内核版本 "},"guide/kernel/CentOS.html":{"url":"guide/kernel/CentOS.html","title":"CentOS/RedHat Linux","keywords":"","body":"CentOS 7\\/RedHat Linux 7 - - - 3.10.0-862.el7.x86_64 3.10.0-693.el7.x86_64 3.10.0-514.2.2.el7.x86_64 3.10.0-327.el7.x86_64 3.10.0-229.el7.x86_64 3.10.0-123.el7.x86_64 CentOS 6\\/RedHat Linux 6 x86 x64 2.6.32-696.el6.i686 2.6.32-696.el6.x86_64 2.6.32-642.el6.i686 2.6.32-642.el6.x86_64 2.6.32-573.el6.i686 2.6.32-573.el6.x86_64 2.6.32-504.el6.i686 2.6.32-504.el6.x86_64 2.6.32-431.el6.i686 2.6.32-431.el6.x86_64 2.6.32-358.el6.i686 2.6.32-358.el6.x86_64 2.6.32-279.el6.i686 2.6.32-279.el6.x86_64 2.6.32-220.el6.i686 2.6.32-220.el6.x86_64 2.6.32-131.el6.i686 2.6.32-131.el6.x86_64 2.6.32-71.el6.i686 2.6.32-71.el6.x86_64 CentOS 5\\/RedHat Linux 5 x86 x64 x86_pae 2.6.18-416.el5-i686 2.6.18-416.el5-x86_64 2.6.18-416.el5PAE-i686 2.6.18-412.el5-i686 2.6.18-412.el5-x86_64 2.6.18-412.el5PAE-i686 2.6.18-411.el5-i686 2.6.18-411.el5-x86_64 2.6.18-411.el5PAE-i686 2.6.18-410.el5-i686 2.6.18-410.el5-x86_64 2.6.18-410.el5PAE-i686 2.6.18-409.el5-i686 2.6.18-409.el5-x86_64 2.6.18-409.el5PAE-i686 2.6.18-408.el5-i686 2.6.18-408.el5-x86_64 2.6.18-408.el5PAE-i686 2.6.18-407.el5-i686 2.6.18-407.el5-x86_64 2.6.18-407.el5PAE-i686 2.6.18-406.el5-i686 2.6.18-406.el5-x86_64 2.6.18-406.el5PAE-i686 2.6.18-404.el5-i686 2.6.18-404.el5-x86_64 2.6.18-404.el5PAE-i686 2.6.18-402.el5-i686 2.6.18-402.el5-x86_64 2.6.18-402.el5PAE-i686 2.6.18-400.el5-i686 2.6.18-400.el5-x86_64 2.6.18-400.el5PAE-i686 2.6.18-398.el5-i686 2.6.18-398.el5-x86_64 2.6.18-398.el5PAE-i686 2.6.18-371.el5-i686 2.6.18-371.el5-x86_64 2.6.18-371.el5PAE-i686 2.6.18-348.el5-i686 2.6.18-348.el5-x86_64 2.6.18-348.el5PAE-i686 2.6.18-308.el5-i686 2.6.18-308.el5-x86_64 2.6.18-308.el5PAE-i686 2.6.18-274.el5-i686 2.6.18-274.el5-x86_64 2.6.18-274.el5PAE-i686 2.6.18-238.el5-i686 2.6.18-238.el5-x86_64 2.6.18-238.el5PAE-i686 2.6.18-194.el5-i686 2.6.18-194.el5-x86_64 2.6.18-194.el5PAE-i686 2.6.18-164.el5-i686 2.6.18-164.el5-x86_64 2.6.18-164.el5PAE-i686 2.6.18-128.el5-i686 2.6.18-128.el5-x86_64 2.6.18-128.el5PAE-i686 2.6.18-92.el5-i686 2.6.18-92.el5-x86_64 2.6.18-92.el5PAE-i686 2.6.18-53.el5-i686 2.6.18-53.el5-x86_64 2.6.18-53.el5PAE-i686 2.6.18-8.el5-i686 2.6.18-8.el5-x86_64 2.6.18-8.el5PAE-i686 CentOS 5-Xen\\/RedHat Linux 5-Xen x86 x64 2.6.18-416.el5xen-i686 2.6.18-416.el5xen-x86_64 2.6.18-412.el5xen-i686 2.6.18-412.el5xen-x86_64 2.6.18-411.el5xen-i686 2.6.18-411.el5xen-x86_64 2.6.18-410.el5xen-i686 2.6.18-410.el5xen-x86_64 2.6.18-409.el5xen-i686 2.6.18-409.el5xen-x86_64 2.6.18-408.el5xen-i686 2.6.18-408.el5xen-x86_64 2.6.18-407.el5xen-i686 2.6.18-407.el5xen-x86_64 2.6.18-406.el5xen-i686 2.6.18-406.el5xen-x86_64 2.6.18-404.el5xen-i686 2.6.18-404.el5xen-x86_64 2.6.18-402.el5xen-i686 2.6.18-402.el5xen-x86_64 2.6.18-400.el5xen-i686 2.6.18-400.el5xen-x86_64 2.6.18-398.el5xen-i686 2.6.18-398.el5xen-x86_64 2.6.18-371.el5xen-i686 2.6.18-371.el5xen-x86_64 2.6.18-348.el5xen-i686 2.6.18-348.el5xen-x86_64 2.6.18-308.el5xen-i686 2.6.18-308.el5xen-x86_64 2.6.18-274.el5xen-i686 2.6.18-274.el5xen-x86_64 2.6.18-238.el5xen-i686 2.6.18-238.el5xen-x86_64 2.6.18-194.el5xen-i686 2.6.18-194.el5xen-x86_64 2.6.18-164.el5xen-i686 2.6.18-164.el5xen-x86_64 2.6.18-128.el5xen-i686 2.6.18-128.el5xen-x86_64 2.6.18-92.el5xen-i686 2.6.18-92.el5xen-x86_64 2.6.18-53.el5xen-i686 2.6.18-53.el5xen-x86_64 2.6.18-8.el5xen-i686 2.6.18-8.el5xen-x86_64 "},"guide/kernel/Ubuntu.html":{"url":"guide/kernel/Ubuntu.html","title":"Ubuntu","keywords":"","body":"Ubuntu x86 x64 x86 x64 4.13.0-15-generic 4.13.0-15-generic 4.10.0-37-generic 4.10.0-37-generic 4.10.0-20-generic 4.10.0-20-generic 4.10.0-19-generic 4.10.0-19-generic 4.8.0-59-generic 4.8.0-59-generic 4.8.0-58-generic 4.8.0-58-generic 4.8.0-39-generic 4.8.0-39-generic 4.8.0-22-generic 4.8.0-22-generic 4.4.0-97-generic 4.4.0-97-generic 4.4.0-96-generic 4.4.0-96-generic 4.4.0-93-generic 4.4.0-93-generic 4.4.0-92-generic 4.4.0-92-generic 4.4.0-91-generic 4.4.0-91-generic 4.4.0-89-generic 4.4.0-89-generic 4.4.0-87-generic 4.4.0-87-generic 4.4.0-83-generic 4.4.0-83-generic 4.4.0-81-generic 4.4.0-81-generic 4.4.0-79-generic 4.4.0-79-generic 4.4.0-78-generic 4.4.0-78-generic 4.4.0-77-generic 4.4.0-77-generic 4.4.0-75-generic 4.4.0-75-generic 4.4.0-63-generic 4.4.0-63-generic 4.4.0-62-generic 4.4.0-62-generic 4.4.0-31-generic 4.4.0-31-generic 4.2.0-27-generic 4.2.0-27-generic 4.2.0-16-generic 4.2.0-16-generic 3.19.0-74-generic 3.19.0-74-generic 3.19.0-73-generic 3.19.0-73-generic 3.19.0-15-generic 3.19.0-15-generic 3.16.0-30-generic 3.16.0-30-generic 3.16.0-23-generic 3.16.0-23-generic 3.13.0-86-generic 3.13.0-86-generic 3.13.0-85-generic 3.13.0-85-generic 3.13.0-44-generic 3.13.0-44-generic 3.13.0-34-generic 3.13.0-34-generic 3.13.0-32-generic 3.13.0-32-generic 3.13.0-24-generic 3.13.0-24-generic 3.11.0-15-generic 3.11.0-15-generic 3.11.0-12-generic 3.11.0-12-generic 3.8.0-29-generic 3.8.0-29-generic 3.8.0-19-generic 3.8.0-19-generic 3.5.0-23-generic 3.5.0-23-generic 3.5.0-17-generic 3.5.0-17-generic 3.2.0-29-generic 3.2.0-29-generic 3.2.0-23-generic 3.2.0-23-generic 3.0.0-12-generic-pae 3.0.0-12-server 2.6.38-8-generic-pae 2.6.38-8-server 2.6.35-19-generic-pae 2.6.35-19-server 2.6.32-38-generic-pae 2.6.32-38-server 2.6.32-33-generic-pae 2.6.32-33-server 2.6.32-28-generic-pae 2.6.32-28-server 2.6.32-24-generic-pae 2.6.32-24-server 2.6.32-21-generic-pae 2.6.32-21-server 2.6.31-14-generic-pae 2.6.31-14-server 2.6.28-11-generic-pae 2.6.28-11-server 2.6.27-7-server 2.6.27-7-server 2.6.24-26-server 2.6.24-26-server 2.6.24-24-server 2.6.24-24-server 2.6.24-23-server 2.6.24-23-server 2.6.24-16-server 2.6.24-16-server "},"guide/kernel/Suse.html":{"url":"guide/kernel/Suse.html","title":"Suse Linux","keywords":"","body":"Suse Linux OS x86 x64 suse 12 ---- 3.12.28-4-default suse 11 sp3 3.0.76-0.11-pae 3.0.76-0.11-default suse 11 sp2 3.0.13-0.27-pae 3.0.13-0.27-default suse 11 sp1 2.6.32.12-0.7-pae 2.6.32.12-0.7-default suse 11 2.6.27.19-5-pae 2.6.27.19-5-default suse 10 sp3 2.6.16.60-0.54.5-default 2.6.16.60-0.54.5-smp suse 10 sp2 2.6.16.60-0.21-default 2.6.16.60-0.21-smp suse 10 sp1 2.6.16.46-0.12-default 2.6.16.46-0.12-smp suse 10 2.6.16.21-0.8-default 2.6.16.21-0.8-smp "},"manual/":{"url":"manual/","title":"功能说明","keywords":"","body":"功能说明 云锁作为一款最简单易用的服务器安全产品，基本上手就会，操作特简单。不过，为了使用户们更好的了解云锁的各项功能和作用，技术人员还是整理了一些基本的功能设置介绍。方便用户快速查看和解决问题。 "},"manual/f01.html":{"url":"manual/f01.html","title":"“添加服务器”操作说明","keywords":"","body":"“添加服务器”操作说明 通过PC端“登录云中心”方式登录，在“批量管理”界面点击“添加服务器”。 默认每个账户可以免费管理5台服务器，超过5台服务器则需收取一定的基础资源使用的费用，费用为10元/台。该费用为一次性支付费用，购买的服务器数量为永久数量，不会因删除服务器而再次收取费用。 在弹出的窗口中输入服务器IP或域名、端口号、服务器别名、登录账户和密码；保存后即可添加到PC端，同时添加到云中心。注意：端口号是云锁连接的端口号，未改过则默认为5555。添加失败时，请查看“服务器端连接失败”解决方法。 除了在PC端进行添加外，在服务器端也可以将服务器添加到云中心账户中。 Windows版本： 在安装过程中弹出下图界面，填写云中心账户和密码，点击“立即加入”即可添加到PC端和云中心。 Linux版本： 安装后进入云锁目录/usr/local/yunsuo_agent/，执行agent_smart_tool.sh进行添加。 # ./agent_smart_tool.sh -u cloud_name -p cloud_passwd 说明：cloud_name：云中心账户名；cloud_passwd：云中心登录密码 "},"manual/f02.html":{"url":"manual/f02.html","title":"“删除服务器”操作说明","keywords":"","body":"“删除服务器”操作说明 对于已离线的服务器或者不再使用的服务器，云锁通过PC端和web端都可以进行删除操作。 PC端：登录PC端在批量管理的界面选中要删除的服务器，点击“更多”-“删除服务器”，服务器即从列表中删除。云中心也同步删除该服务器。 云中心：登录云中心，进入服务器管理界面，选中要删除的服务器，点击“删除”，服务器即被删除。同时登录PC端也可以看到该服务器被删除。 "},"manual/f03.html":{"url":"manual/f03.html","title":"“PC 端远程登录”操作说明","keywords":"","body":"“PC 端远程登录”操作说明 PC端通过云中心登录云锁，“批量管理”页面的服务器信息后会看到远程连接的图标，点击后会打开远程连接登录界面。 远程登录管理界面输入要登录服务器用户名和密码。 远程登录Windows服务器。 ssh登录Linux服务器。 "},"manual/f04.html":{"url":"manual/f04.html","title":"“服务器和 Web 服务重启”功能操作","keywords":"","body":"“服务器和 Web 服务重启”功能操作 云锁是通过PC端连接服务器端进行管理的方式。为加强用户方便性和体验性，在PC端添加了“重启服务器和Web服务的功能”。用户登录云锁，通过首页服务器信息下的快捷按钮可以快速重启服务器。 切换到应用防护界面，通过Web服务后面的快捷按钮可以快速重启Web服务。 这样就可以避免用户在使用PC端进行管理的同时还需要远程到服务器进行重启的操作，从而方便了使用及体验。 除此之外，在批量管理界面同时提供了对多台服务器重启和Web服务重启的功能，以方便用户对大量服务器操作的需求。 "},"manual/f05.html":{"url":"manual/f05.html","title":"“实时监控”功能说明","keywords":"","body":"“实时监控”功能说明 “实时监控”功能，可以对所管理服务器的CPU、内存、网络IO进行监控；并对服务器的性能进行整体监控，无需对一台一台的进行观察。及时定位异常的资源使用或异常的服务器，快速进行问题排查和解决。 该功能在V2时为测试功能，因此免费使用，V3正式上线后为0.3元\\/每天。 该功能默认为无监控项，需用户自定义添加监控的服务器和监控的项。通过“新增监控”添加要监控的服务器和监控的项。 对于特定的监控项可以通过双击进行放大，进行专项监控。 当添加的监控项较多且部分服务器不需要继续监控，则可以对不需要监控的项进行删除；如所有监控项都需要删除则右键“删除全部监控”。 "},"manual/f06.html":{"url":"manual/f06.html","title":"“一键巡检”功能说明","keywords":"","body":"“巡检”功能操作 “巡检”主要是对服务器和网站进行全面扫面，对服务器和网站存在的安全隐患进行检查并修复。服务器安全主要针对计划任务、账户（登录账户、克隆账户、隐藏账户）及云锁各功能开启状态进行检查和修复；网站安全主要针对网页木马、网站挂马和暗链黑链进行检查和修复。 登录云锁，打开具体服务器信息界面，在右边可以看到巡检功能。 巡检结束后会给出一个详细的巡检结果并对当前的安全情况给出分数；返回首页还会看到巡检的时间和对巡检的概述。 针对查出的问题，既可以“一键修复”也可以针对具体的问题进行详细操作。选择查看详情可以看到该问题项的具体内容，并可将其下载到本地进行分析；对于可疑外链和网站挂马，如果是可信任的项则加入信任域。 选择“一键修复”后，针对外链和挂马进一步判断是否为信任项，将非信任项勾选后进行“一键修复”。修复过程中还可以看到修复的进度。 为避免误操作而导致一些不需要修复的项被修复掉，云锁在巡检设置里提供了隔离列表，已修复的项都可以在隔离列表中看到并对误操作的项进行还原。同时也可以对已确认的项进项删除。 除了“一键修复”外，还可以针对单条危险项进行修复、忽略和查看详情。 对于当前阶段不需要巡检到的项可以进行忽略，这样在下次巡检的时就不会巡检该项。当需要巡检并修复时，可以从巡检结果中的已忽略项中取消，或者在巡检设置的文件忽略列表中进行取消 点击“查看详情”可以看到问题项的具体编码内容，并且可以将问题项下载到本地进行分析。 巡检的可疑外链中会有用户自定义的友链等域名，对于这样的域名可以点击加入信任域中，以后巡检中针对这样的域名不再列出。而加入信任域名的项在“设置-巡检设置-信任域名设置”中可以看到；当不再信任时，可以进行删除。 巡检时会占用一部分系统资源，云锁提供了2种巡检模式（空闲模式、极速模式），用户可以根据自己服务器的实际情况在“Web巡检设置”中选择巡检的模式。同时还可以自定义巡检的站点（默认为所有站点）及文件类型。 云锁支持自动巡检，可以设置在服务器资源占用较小的时间内进行巡检。 考虑到文件较多时巡检时间较长，用户无法一直待在机器旁，巡检意外中断而不知；云锁特意添加了巡检中断的友情提示，登录云锁就可以看到。 "},"manual/f07.html":{"url":"manual/f07.html","title":"“网站漏洞防护”功能说明","keywords":"","body":"“网站漏洞防护”功能说明 云锁“网站漏洞防护”功能通过漏洞防护（防SQL注入、XSS防护、漏洞攻击防护）、Web服务器溢出攻击防护、Web服务器文件名解析漏洞防护、禁止浏览畸形文件、仅允许下列请求、禁止下载特定类型文件、网页浏览实时防护等功能防止黑客利用Web服务器或Web应用程序的漏洞入侵服务器。同时网站例外名单功能还可以对误判而拦截的用户请求进行放行，并且允许自定义拦截页面提示信息，充分考虑到了用户体验和用户需求。 通过“应用防护”中的Web防护（IIS、Apache、Nginx等）进入Web应用设置，打开“网站漏洞防护”功能。 SQL防注入 溢出攻击防护 文件名解析漏洞防护 禁止浏览畸形文件 仅允许下列请求类型 禁止下载特定类型文件 网页浏览实时防护 自动屏蔽扫描器 隐藏WebServer版本信息 X-Forwarded-For防护 其它设置 SQL防注入 该功能通过匹配SQL注入、XSS攻击等攻击类型特征库对用户输入进行过滤，从而实现防止攻击保护网站的目的。 我们主要通过SQL防注入的默认防护规则为例通过相应的攻击实例来介绍该功能设置。 [info] XSS防护和防漏洞攻击设置与SQL防注入设置相同。 1） 开启SQL防注入规则的“防止简单的and or方式注入”的“检测URL” 在浏览器的地址栏输入SQL注入的命令 and 1=1进行注入，如下图 输入该条命令后，浏览器返回云锁拦截界面。每当有SQL注入时，云锁都会返回该拦截提示界面及提示信息。 云锁的防护日志下可以看到对应的日志。 2） 开启SQL防注入规则的“防止简单的and or方式注入”的“检测Cookie”。 使用工具burp获取Cookie，修改Cookie值后继续访问。 访问后会返回与“检测URL”一样的拦截页面。同时在防护日志会生成对应的拦截日志。 3） 开启SQL防注入规则的“防止简单的and or方式注入”的“检测POST”。 在http协议中，搜索是Post方式提交请求；所以在搜索框中输入注入语句“? and 1=1”并提交。 提交后部分网站会返回与“检测URL”一样的拦截页面，部分网站会禁止提交请求，一直显示提交中。同时在防护日志会生成对应的拦截日志。 4） 开启SQL防注入规则的“防止简单的and or方式注入”的“检测UA”。 访问网站时，在http请求的User-Agent中加入“and 1=1”进行访问 访问后网站会返回与“检测URL”一样的拦截页面。同时在防护日志会生成对应的拦截日志。 5） 除了默认的规则，我们还设置了自定义添加规则的功能，方便用户自己调整规则，充分加强了用户的自由度。 提交自定义请求访问页面时，同SQL注入防护一样，会返回拦截页面及生成防护日志。 如果不需要实时防护，可以在“设置中心”开启“监控模式”，此时所有对网站的攻击行为只记录不拦截。 当配置的注入规则较为复杂而影响网站正常使用时，可以通过“设置中心”恢复默认配置，以使网站可以正常使用。 溢出攻击防护 “Web服务器溢出攻击”通常指缓冲区溢出攻击，黑客通常利用向程序输入缓冲区写入使之溢出的内容从而破坏程序运行并取得程序乃至系统的控制权。用户可以通过开启云锁的“Web服务器溢出攻击防护”功能抵御类似的攻击，从而防止黑客获取系统的控制权。 开启“Web服务器溢出攻击防护”功能。 在浏览器地址栏输入超长URL，进行溢出攻击。 同时，在云防护日志中可以看到对应日志。 文件名解析漏洞防护 黑客可以上传类似wooyun.asp;.jpg、wooyun.php.owf.rar的可执行脚本文件，利用IIS和Apache的解析漏洞，使脚本文件执行从而获取系统权限，威胁网站的安全。用户可以通过开启云锁的“Web服务器文件名解析漏洞防护”功能防止黑客利用这些漏洞对服务器进行攻击，对黑客类似攻击行为进行拦截。 开启“Web服务器文件名解析漏洞防护”功能。 在浏览器地址栏输入含有wooyun.asp;.jpg的URL进行访问。 同时，在云锁防护日志中可以看到对应的日志。 禁止浏览畸形文件 黑客通过构造类似com1.php;jpg之类的畸形文件的后缀名上传到服务器上再结合IIS的解析特性即可成功执行代码，然后获取必要的网站配置等信息威胁网站的安全。用户可以通过开启云锁的“禁止浏览畸形文件”功能抵御类似的攻击，保护网站服务器的安全。 开启“禁止浏览畸形文件”功能。 在浏览器地址栏输入含有com1.php;jpg的URL进行访问。 同时，在云锁安全防护日志中可以看到对应的拦日志。 仅允许下列请求类型 网络传输中主要通过HTTP协议进行传输。但是熟悉HTTP协议的黑客可以通过构造或伪装一些请求进行攻击，如使用PUT请求将危险代码传送到网站上，从而威胁到网站的数据。用户可以通过开启云锁的“仅允许下列请求”功能，一些不需要的请求进行提交，来有效抵御类似的攻击，保护网站服务器的安全。 开启“仅允许下列请求”功能。 使用Fiddler Web Debugger工具发送不允许的OPTIONS请求 同时，在云锁防护日志中可以看到对应的日志。 禁止下载特定类型文件 在互联网中用户的数据信息、软件的运行日志等信息都是黑客可以利用的信息，一旦存放这些文件的路径被获取，会给用户和网站带来难以想象的麻烦。用户可以通过开启云锁的“禁止下载特定类型文件”的功能，保护这类文件不被下载，进而保护用户数据和运行日志的安全。 开启“禁止下载特定类型文件”的功能。 通过浏览器下载.sql文件。 同时，在云锁防护日志中可以看到对应的日志。 网页浏览实时防护 服务器经常会被黑客上传网页木马，通过上传的网页木马获取和修改服务器上数据和文件，影响用户的网站正常访问，给用户带来损失。而“网页浏览实时防护”主要是针对黑客利用其它途径上传了网页木马，通过浏览器访问网页木马时进行拦截从而保护用户的网站不被修改。 假设网站下已被上传网页木马，未开启“网页浏览实时防护”访问该网页木马。 开启“网页浏览实时防防护”功能并访问网页木马。 同时，在云锁防护日志中可以看到对应的拦截日志。 自动屏蔽扫描器 攻击者通常先使用扫描工具或扫描器探测网站服务器是否有可被利用的漏洞，然后利用漏洞进行攻击。 开启“自动屏蔽扫描器”功能，当发现有这类行为时则直接阻断攻击者对网站服务器的扫描；同时会产生日志。 隐藏WebServer版本信息 攻击者通常会获取网站Web Server的版本信息，利用对应版本的漏洞对网站进行恶意攻击、渗透等。 云锁的“隐藏WebServer版本信息”功能则通过自定义WebServer内容将其版本信息进行隐藏，使攻击者无法通过Web Server的版本利用相应的漏洞进行攻击。 开启“隐藏WebServer版本信息”功能，并设置Web环境信息别名：test；设置后需要重启WebServer。 设置后通过调试器可以看到自己的Web Server版本信息被改为设置的别名。 X-Forwarded-For防护 该功能主要是防护网站被恶意用户构造异常的“X-Forwarded-For”字段进行访问，从而对网站造成威胁。 开启“X-Forwarded-For防护”功能，构造异常“X-Forwarded-For”对网站进行访问。 当攻击者构造异常的“X-Forwarded-For”字段访问网站时，则会被拦截。 其它设置 考虑到用户使用漏洞防护的灵活性，云锁还提供了“网站例外名单”功能，可以对不需要拦截的网站进行放行；除此还可设置报警提示和自定义拦截页面提示，满足用户的各方面需求。 当用户对网站进行管理或构造一些代码对网站进行监控时，会被云锁拦截导致这类行为无法进行；这就需要用户将需要进行操作的网站或对应的文件设置为“网站例外名单”。点击“设置”进入“设置中心”，在“网站漏洞防护”添加需要例外的网站或文件路径。 除“网站例外名单”功能外，还可以“自定义拦截信息提示”，让拦截页面更加的人性化。 "},"manual/f08.html":{"url":"manual/f08.html","title":"“网站后台防护”功能设置","keywords":"","body":"“网站后台防护”功能设置 黑客通过常用网站的默认后台/admin.asp、/login.php等路径猜测、获取用户网站的后台路径，然后通过其他手段获取网站管理员的用户名、密码登录管理界面，威胁网站安全。 云锁“网站后台防护”功能通过重定向网站后台路径，使黑客无法获取网站后台的路径的方法保护网站安全。 通过“应用防护”中的Web防护（IIS、Apache、Nginx等）进入Web应用设置，打开“网站后台防护”功能。 进入“网站后台防护”界面，配置后台防护规则。网站原始后台地址是指网站真实的后台地址，而重定向地址是指用户自定义的虚拟的后台地址；设置后只有使用自定义的虚拟地址才可以访问网站后台地址进行网站后台登录。 通过原始真实网站后台直接访问网站后台登录界面会自动跳转到404页面，可以在云锁的防护日志查看到相应的防护信息。 只有通过用户自定的虚拟地址访问才会跳转到真实的后台页面进行登录。同时防护日志会记录访问成功日志，如果非本人访问则说明虚拟后台已被他人获知，请及时更改自定义后台。 "},"manual/f09.html":{"url":"manual/f09.html","title":"“抗 CC 攻击”功能设置","keywords":"","body":"“抗CC攻击”功能设置 CC（Challenge Collapsar），其前身名为Fatboy攻击，是利用不断对网站发送连接请求致使形成拒绝服务的目的。是DDOS（分布式拒绝服务）的一种，是借助代理服务器生成指向受害主机的合法请求，实现DOS和伪装。模拟多个用户不停的进行访问那些需要大量数据操作，成服务器资源耗尽。 通过“应用防护”中的Web防护（IIS、Apache、Nginx等）进入Web应用设置，打开“网站后台防护”功能。 “抗CC攻击”可以有效防御CC攻击，追溯攻击源头；同时减少对服务器资源的损耗和带宽的占用。CC防护策略分三个级别对服务器进行保护，默认为低级别，用户可根据实际情况对防护级别进行调整，级别越高防护越严格。 低：“启用浏览器行为验证”时，该IP访问请求数达到触发条件时，自动识别该IP是否真实访客浏览行为，如非真实访客浏览行为则将该IP加入黑名单锁定20分钟；未启用时则访问请求数数达到触发条件即将IP加入黑名单。云锁默认触发条件为单个IP每60秒内最大请求数不超过200次，超过则触发CC防护策略，将访问IP冻结20分钟。且只有低级别时需要验证请求数。 中：每个IP首次访问都会自动识别是否为通过浏览器访问，不再等请求数达到触发值，如非真实访客行为则将该IP加入黑名单锁定20分钟。 高：每个IP首次访问进行手动验证，识别是否真实访客浏览行为，如非真实访客浏览行为则将该IP加入黑名单锁定20分钟。开启高级防护，访问网站需要输入验证码进行验证。 针对多站点用户需要对个别站点进行特殊设置的，及一些api接口调用被CC误拦截；可以通过“设置中心”添加网站例外白名单解决；添加到该列表中的网站则不受“抗CC攻击”的保护，可以正常访问。 同时云锁的CC验证方式兼容使用CDN的情况，在使用CDN时选择“HTTP 200”方式进行验证；而无CDN时，使用“HTTP 302”方式进行验证。除此还可以对提示信息自定义。 当网站受到攻击后通过防护日志可以看到CC攻击的日志，并可以看到攻击者的IP地址进行溯源。 在日志中点击攻击IP，可以将IP添加到黑白名单，黑白名单功能详见“IP黑白名单”功能说明。 "},"manual/f10.html":{"url":"manual/f10.html","title":"“敏感词过滤”功能设置","keywords":"","body":"“敏感词过滤”功能设置 “敏感词过滤”是指对互联网发布的言论和文章中含有的敏感词进行过滤。敏感词经过在互联网的传播和扩散会影响社会的稳定和用户的使用。云锁的“敏感词过滤”功能可以对用户post请求的内容阻止并提示，而get请求的内容则使用“*”号替代敏感词。如果网站开启GZIP时，敏感词过滤则不生效。 通过“应用防护”中的Web防护（IIS、Apache、Nginx等）进入Web应用设置，打开“敏感词过滤”功能。该功能支持内置敏感词词库和自定义敏感词两种过滤方式。 1) 内置词库。可以搜索（支持关键字搜索）词库内的敏感词，对不需要过滤的敏感词放行，放行后则不再对该内容进行过滤。 2) 自定义敏感词。词库内的敏感词不满足需求时，可以自定义敏感词进行过滤。 除自定义外还可以导入敏感词库文件。导入的敏感词库文件必须是txt文档，每行一个词，每一个词最大字数不超过50个字。 为了方便用户使用，云锁还提供网站例外名单的设置和报警提示的设置。网站例外名单是为拥有多个站点的服务器用户不影响其它对外开通连接的网站正常运营而设置的，用户可以通过添加、删除“网站例外名单”对站点是否需要敏感词过滤进行设置。 访问过程中Get请求中包含敏感词则会被用“*”代替。POST请求中包含敏感词则会显示拦截页面。 通过防护日志可以看到触发敏感词被拦截的日志。 "},"manual/f11.html":{"url":"manual/f11.html","title":"“网站防盗链”功能设置","keywords":"","body":"“网站防盗链”功能设置 盗链是指服务提供商自己不提供服务的内容，通过技术手段绕过其它有利益的最终用户界面(如广告)，直接在自己的网站上向最终用户提供其它服务提供商的服务内容，骗取最终用户的浏览和点击率。受益者不提供资源或提供很少的资源，而真正的服务提供商却得不到任何的收益。云锁通过“网站防盗链”功能更有效的保护用户的网站资源。 云锁提供了“引用方式”和“会话方式”两种盗链防护方式。“引用方式”主要用于防止图片、下载资源等类型文件被盗链（如JPG、GIF图片，RAR、ZIP等下载资源）。“会话方式”主要用于防止流媒体类型文件被盗链（如MP3，WMA等在线播放资源）。 通过“应用防护”中的Web防护（IIS、Apache、Nginx等）进入Web应用设置，打开“网站防盗链”功能。 进入“网站防盗链功能”，可以看到防盗链的2种方式。 1） 引用方式 指通过判断referer变量值来判断图片或资源的引用是否合法，只有在设定的允许范围内的referer才能访问指定的资源，从而实现了防盗链的目的。 2） 会话方式 所谓会话防盗链方式，是以判定浏览器为原则，通过假设用户使用浏览器正常浏览站点，然后向其发送动态生成的Session ID，在得到基于浏览器才能响应的返回后进而确认为其为浏览器。同时通过用户相关的动态的Session ID生成和过期，防止暴力破解。使得下载工具等非浏览器程序无法进行盗链行为，同时结合引用反盗链方式可达到近乎完美的防盗链能力。 根据会话方式描述，我们针对浏览器访问用户资源时产生的cookie加入了过期时间，浏览器关闭时过期时间不会被删除，当浏览器访问用户资源超过过期时间时则需要产生一个新的cookie，否则判定为盗链。 为了更人性化的设置，用户可以自定义添加、删除保护资源类型，同时需要注意的是保护资源类型扩展名不需要“.”符号，只需填写纯粹的扩展名即可。 为了用户使用方便，同时为了避免搜索引擎抓取图片被拦截；云锁“引用方式防盗链”可以对信任域名添加白名单，信任域名将不在网站资源防盗链功能的防护之内；用户可以新增、编辑、删除受信任域名。 对于设置多个站点的服务器用户，为了不影响其它对外开通连接的网站正常运营，可在设置中心添加、删除网站白名单对不受防护的站点进行设置。 除上述人性化的设置外，云锁还提供被盗链时服务器返回的友情提示的文字内容的设置。 当通过网站访问被盗连的资源时，浏览器会返回拦截页面提示；同时在防护日志可以看到拦截的盗链日志。 "},"manual/f12.html":{"url":"manual/f12.html","title":"\"防多线程下载\"功能说明","keywords":"","body":"\"防多线程下载\"功能说明 线程可以理解为下载的通道，一个线程就是一个文件的下载通道，多线程也就是同时开起好几个下载通道，所以占用的线程越多的话，占用的的带宽也就越多。带宽占用较多则会影响用户对网站的访问，影响网站的访问量。云锁“防多线程下载”则通过限制下载的线程数量，避免单个用户占用带宽资源。 通过“应用防护”中的Web防护（IIS、Apache、Nginx等）进入Web应用设置，打开“防多线程下载”功能。 进入“防多线程下载”页面，设置用户的最大线程数为1；受保护的资源类型为默认类型。 使用比特彗星下载exe类型和iso类型资源，可以看出exe资源的线程数受到了限制。 防护日志中可以看到触发的防多线程下载的日志。 "},"manual/f13.html":{"url":"manual/f13.html","title":"“HTTP 响应内容保护”功能设置","keywords":"","body":"“HTTP 响应内容保护”功能设置 部分网站因为网站自身编码问题导致在URL输入一些特殊字符时，返回页面的信息包含网站信息及数据库信息。“HTTP响应内容保护”功能则可对该类页面进行保护，避免网站及数据库信息被曝出，导致信息泄露。 当访问网站时，有时在网站访问失败时会显示一些如网站路径、web容器版本等信息，易被恶意用户利用进行渗透。 通过“应用防护”中的Web防护（IIS、Apache、Nginx等）进入Web应用设置，打开“HTTP响应内容保护”功能。 将502添加到列表中，再次对该页面进行访问。返回页面会变为云锁的拦截页面，并隐藏了Nginx的版本信息。 "},"manual/f14.html":{"url":"manual/f14.html","title":"\"HTTP 请求头防护\"功能说明","keywords":"","body":"\"HTTP请求头防护\"功能说明 HTTP（HyperTextTransferProtocol）是超文本传输协议的缩写，它用于传送WWW方式的数据。HTTP消息包括客户机向服务器的请求消息和服务器向客户机的响应消息。这两种类型的消息由一个起始行，一个或者多个头域，一个只是头域结束的空行和可选的消息体组成。HTTP的头域包括通用头，请求头，响应头和实体头四个部分。每个头域由一个域名，冒号（:）和域值三部分组成。域名是大小写无关的，域值前可以添加任何数量的空格符，头域可以被扩展为多行，在每行开始处，使用至少一个空格或制表符。 而请求头域允许客户端向服务器传递关于请求或者关于客户机的附加信息。请求头域可能包含下列字段Accept、Accept-Charset、Accept- Encoding、Accept-Language、Authorization、From、Host、If-Modified-Since、If- Match、If-None-Match、If-Range、If-Range、If-Unmodified-Since、Max-Forwards、 Proxy-Authorization、Range、Referer、User-Agent。对请求头域的扩展要求通讯双方都支持，如果存在不支持的请求头域,一般将会作为实体头域处理。具体讲解详见百度百科：《Http请求头》。 云锁\"HTTP请求头防护\"功能通过对HTTP请求头中的字段进行自定义规则防护的方式保护网站，避免修改了HTTP请求头对网站进行攻击，或者恶意引导流量等。 通过“应用防护”中的Web防护（IIS、Apache、Nginx等）进入Web应用设置，打开“HTTP请求头防护”功能。 模拟网站被利用HTTP Host攻击。用Modify Hearders修改HTTP Host为www.zblog.com进行访问。 添加HTTP请求头防护的规则，将无法利用Host为www.zblog.com对网站进行的攻击拦截，使无法访问网站。注意：最大长度和规则是并存关系，当设置长度时则优先判断请求头的长度，如不需要对长度判定则设置为0。 防护规则支持正则表达式。如有多个host可以用“|”隔开，其它请求头配置规则方式相同。 同时可以在云锁防护日志中看到拦截日志。 "},"manual/f15.html":{"url":"manual/f15.html","title":"“自定义 CDN ”功能说明","keywords":"","body":"“自定义CDN”功能说明 CDN的全称是Content Delivery Network，即内容分发网络。通过在网络各处放置节点服务器所构成的在现有的互联网基础之上的一层智能虚拟网络，实时根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。使用户可就近取得所需内容，解决 Internet网络拥挤的状况，提高用户访问网站的响应速度。 云锁已将市面上主流CDN内置到了白名单中，但是还会有其它CDN、自建CDN以及负载均衡等无法直接获取到的IP，当通过这些IP访问时易被云锁判定为CC攻击从而导致无法访问网站。而将这些IP直接加入到白名单，则通过这些IP的攻击也不会拦截。因此云锁特别新增“自定义CDN”功能来解决该问题，将自建CDN或负载均衡的IP加入到“自定义CDN”中，通过这些IP的访问则不会被判定为CC攻击，而其它的如注入等攻击则依旧会被拦截，而不会对网站服务器产生威胁。 通过“应用防护”中的Web防护（IIS、Apache、Nginx等）进入Web应用设置，打开“自定义CDN”功能。 在功能页面添加IP及备注；通过添加的CND或负载均衡访问站点则不被抗CC攻击拦截，但其它攻击行为依旧会被拦截。 当要添加IP较多时可以直接将其保存为“*.txt”文档直接导入，保存时必须每行一个IP。 "},"manual/f16.html":{"url":"manual/f16.html","title":"“高级防护”功能说明","keywords":"","body":"“高级防护”功能说明 高级防护功能为云锁增值功能项，费用为每台150元/月/台。采用了无规则脚本虚拟机（沙盒）技术、RASP技术等，可以有效拦截未知webshell、及时发现网站程序存在的未知漏洞并支持java类web应用的漏洞防护。 通过“应用防护”中的Web防护（IIS、Apache、Nginx等）进入Web应用设置，打开“自定义CDN”功能 功能开启后可以对利用网站中下述漏洞进行的攻击进行拦截。 功能 说明 已知webshell自动隔离 将危险进程创建的已知webshell实时自动隔离 未知webshell实时防护 依托云中心无规则脚本虚拟机（沙箱）实时监测并拦截未知webshell 未知SQL注入漏洞防护 采用无特征的基于SQL语法分析的针对未知SQL注入漏洞进行防护 未知上传漏洞防护 对网站中存在上传漏洞的页面进行防护，上传危险页面或程序自动拦截 Struts2漏洞防护 Struts2漏洞利用防护（需要在“应用防护”中安装Java类web应用插件） 反序列化漏洞防护 对反序列化漏洞被利用攻击进行防护 任意文件读取漏洞防护 对网站中存在任意文件读取漏洞的页面进行防护，在读取发生时阻断 命令执行漏洞防护 对网站中存在命令执行漏洞的页面进行防护，执行命令时阻断 对于恶意用户的攻击行为及攻击IP则进行记录与追溯，通过云中心的事件管理进行展示。 "},"manual/f30.html":{"url":"manual/f30.html","title":"\"域名恶意解析防护\"说明","keywords":"","body":"“域名恶意解析防护”功能说明 网络中进程有一些非法域名解析到独立的服务器上，被非法域名解析后，则会影响网站的权重，更严重则会导致被恶意解析的服务器上的网站被关闭。如果被工信部扫描到，则会为该主机的客户和该客户的服务商带来损失。 通过“恶意域名解析防护”，则可以设置允许和禁止指向本服务器的域名，从而保护服务器不被恶意解析。 通过“应用防护”中的Web防护（IIS、Apache、Nginx等）进入Web应用设置，打开“恶意域名解析防护”功能。 设置仅允许通过c57x86.zblog.com访问服务器；当伪造其它域名访问服务器时则会访问失败。 设置禁止通过c57x86.zblog.com访问服务器；当伪造该域名访问服务器时则会访问失败。 "},"manual/f17.html":{"url":"manual/f17.html","title":"“登录防护”功能说明","keywords":"","body":"“登录防护”功能说明 “登录防护”功能通过增强Windows远程登录的认证方式实时、主动地对用户远程桌面提供保护，防止非法用户入侵服务器，获取服务器内敏感信息。 云锁通过对登录用户、IP段、时间段、计算机名以及修改远程登录（ssh）端口等多重限制对远程登录服务器进行保护，并且可以在一条规则内设置多个限制条件；同时对于登录服务器的行为进行记录。 开启“应用防护”中的系统登录防护后，通过设置打开登录防护规则配置界面，对服务器登录规则进行设置。 该功能对用户登录有2种处理方式，分别为允许登录和禁止登录。当设置为允许登录时，则只有符合设置条件才可以登录服务器；而设置为禁止登录时，则符合设置条件的都不允许登录服务器。当多个条件允许登录时，则需所有条件都符合才可登录；多个条件限制登录时，有一个条件符合则禁止登录。 以Windows系统为例，对该功能进行说明。为了更直观的体现该功能，以下设置都为禁止登录。设置禁止IP段登录。 使用禁止登录IP段内的IP进行登录。 在防护日志的登录日志中可以看到拦截日志。 设置时间段和计算机名（Linux不支持设置计算机名）也与IP段一样。禁止登录时会在登录页面提示，同时记录日志。 除了可以设置单条规则外，每个限制条件还可以设置多个规则。同时还可以对登录用户进行限制，而未设置规则的用户则不受规则影响，可以正常远程桌面登录服务器系统。 云锁不仅记录了违规的登录日志，登录成功也会进行记录，可以了解每个用户的登录情况。 为了让登录更安全及使用的方便性，云锁还支持修改远程（ssh）登录端口。 "},"manual/f18.html":{"url":"manual/f18.html","title":"“防暴力破解”功能说明","keywords":"","body":"“防暴力破解”功能说明 暴力破解是指利用穷举的方法对用户名和密码进行匹配，直到匹配到正确的内容。当用户设置的密码较为单一时，则通过工具会很快的获取到正确的用户名和密码对服务器进行登录。 云锁“防暴力破解”通过对单一IP的请求时间及错误请求次数限制暴力破解，当超过设置的条件时则对提交请求的IP进行锁定。 开启“应用防护”中的防暴力破解后，点击“设置”打开“防暴力破解”规则配置界面。 对服务器登录规则进行设置，默认为2分钟内提交错误请求超过10次则锁定60分钟。 当发现服务器遭到暴力破解时，防护日志的登录日志中会进行记录。 在云中心配置相应的告警策略，则可以通过邮件或短信进行通知。 除了对远程登录进行防护外，针对FTP、SMTP、POP3、IMAP都会进行防护，防护方式与远程登录一致。 "},"manual/f19.html":{"url":"manual/f19.html","title":"“文件上传防护”功能设置","keywords":"","body":"“文件上传防护”功能设置 黑客利用文件上传漏洞通过上传.asp.jpg等畸形文件或.aspx、*.php等网马文件到服务器的upload相关目录下，利用网站服务器的一些特性执行代码，获取网站管理员用户、密码等一些网站重要信息，此举严重危害网站安全。 云锁“文件上传防护”功能采用内核加固技术，以白名单的方式限制上传文件的类型，从而达到保护网站服务器安全的目的。 “系统防护”中进入“文件上传防护”功能，添加相应网站允许jpg类型的文件上传。 在设置规则的网站上传一个jgp类型的文件，显示上传成功。 在设置规则的网站上传一个非jgp类型的文件，提示“无法保存”。 在云锁防护日志的“系统防护日志”中可以查看到相应的防护日志。 用户需要一些其它的工具进行上传而不希望被拦截，则可以将工具添加到“例外进程设置”中，这样使用该工具上传任何文件到保护目录都不会被拦截。如将xftp添加到“例外进程”中。 通过xftp上传非允许类型的文件成功。 "},"manual/f20.html":{"url":"manual/f20.html","title":"“文件防篡改”功能设置","keywords":"","body":"“文件防篡改”功能设置 一些用户为了提高网站的PR值通常会在访问量较高的网站中隐藏自己的链接，并且将链接做的非常隐蔽，在短时间内不易被搜索引擎察觉。而黑客往往会通过各种手段获得网站管理员账号，然后登录网站后台，通过数据库备份/恢复或者上传漏洞获得一个webshell。利用获得的webshell修改网站页面的内容，向页面中加入恶意转向代码。也可以直接通过弱口令获得服务器或者网站FTP，然后直接对网站页面直接进行修改。 “文件防篡改”功能通过内核加固技术保护网站目录及文件不被修改；甚至即使被获取了权限上传了Webshell也无法对网站的文件进行修改。 通过“系统防护”中进入并开启“文件防篡改”功能，添加受保护的路径，可以根据网站文件实际情况选择是否运行创建和删除文件。用户则可以根据自己的实际情况选择保护网站目录或文件。 下面的例子是将c57x86.zblog.com站的根目录添加为保护目录。 通过FTP向保护的目录下上传Webshell，会被阻止上传。 在云锁防护日志的“系统防护日志”中可以看到创建文件失败的日志。 为了验证保护效果，我们假设网站已被获取管理权限并被上传了Webshell，通过Webshell修改首页文件index.php。 在云锁防护日志的“系统防护日志”中可以看到修改文件失败的日志。 用户需要对网站中的一些文件进行简单编辑时，则可以将工具添加到“例外进程设置”中，这样对保护网站中文件进行编辑时则不会被拦截。例如vim，当vim未加入到例外进程中，修改的文件无法保存，同时会记录在日志中。 将vim添加到例外进程中，再次对文件进行编辑则可编辑并保存。 同时由于要维持业务正常运行，一些缓存目录、数据库目及上传目录需要放开权限。云锁设置了例外路径，需要放开权限的目录则可加入到例外路径中，这样就不受规则保护，可随时在该路径下创建修改文件。 当然云锁对于Webshell的防护是多个层级进行的，假设被黑客将webshell传到了服务器上，也会在访问时被“网页浏览实时防护”拦截。而且在巡检时也会被检测到进行修复。 "},"manual/f21.html":{"url":"manual/f21.html","title":"“服务器优化”功能设置","keywords":"","body":"“服务器优化”功能设置 服务器系统默认会开启很多不常用的服务和设置，这些服务和设置既会给服务器造成安全隐患，也会影响服务器使用性能。云锁“服务器优化”功能可以分析您的服务器，对不常用的服务和设置进行优化，提高服务器的安全及性能。 “系统防护”下打开“服务器优化”进行扫描。 扫描后列出具体项，对列出的项可以进行逐个优化或一键优化；如果有些项不需要优化则可以选择忽略。 对于忽略和优化的项可以通过“已优化项”和“已忽略项”查看；同时还可以进行取消忽略项和恢复优化项。同时针对多个项还可以全部取消和恢复。 "},"manual/f22.html":{"url":"manual/f22.html","title":"“服务器漏洞修复”功能说明","keywords":"","body":"“服务器漏洞修复”功能说明 系统漏洞是指应用软件或操作系统软件在逻辑设计上的缺陷或在编写时产生的错误，这个缺陷或错误可以被不法者或者电脑黑客利用，通过植入木马、病毒等方式来攻击或控制整个电脑，从而窃取您电脑中的重要资料和信息，甚至破坏您的系统。 “服务器漏洞修复”可以扫描服务器系统，列出未修复的不同级别的漏洞补丁和已过期的补丁。用户可以根据漏洞的严重程度和必要性选择是否修复，针对一些暂不需要更新的补丁则可以进行忽略，当需要更新时取消忽略即可更新。 “系统防护”进入“服务器漏洞修复”，对服务器进行漏洞扫描。 扫描后列出具体项，对列出的项可以进行一键修复和一键忽略。 针对每一个漏洞都可以查看“详情”，了解补丁的详细信息，以便确实该漏洞是否修复，如不需要修复则可以选择忽略。 每次扫描完成后，都可看到已安装补丁、已忽略补丁和已过期补丁的数量，对当前服务器的漏洞状况有一个初步的了解。 “已忽略”则是当前暂不更新的漏洞补丁，对于已忽略的补丁，当需要继续更新时则可选择取消忽略。 当选择“一键修复”后可以看到修复的当前状态；在修复完成后还可以知道修复成功和修复失败的补丁。 "},"manual/f23.html":{"url":"manual/f23.html","title":"“IP 黑白名单”功能说明","keywords":"","body":"“IP黑白名单”功能说明 云锁的“IP黑白名单”是针对IP是否被允许访问网站的功能。加入黑名单的IP则拒绝其对网站的访问，而加入白名单的IP则不受任何限制。注意：当黑白名单出现交叉时，黑名单优先。 “系统防护”打开“IP黑白名单”功能，直接添加黑白名单即可实时生效。由于云锁的黑白名单是驱动级，因此当驱动未安装成功时，则不生效（主要为Linux系统环境）。所以当出现将IP加入黑名单后还记录该IP攻击日志时，请对照Linux支持内核版本查看是否支持该系统内核版本。 “系统防护”打开“IP黑白名单”功能，直接添加黑白名单即可生效。 黑白名单支持添加备注和范围添加（即IP段添加），添加时以“-”分开；添加时还可对IP进行备注，说明该IP被加入黑白名单的原因。 该功能还支持导入导出；当用户自己有一套黑白名单库时，直接将文件导入，而无需再输入一次。 当设置的黑白名单中的IP需要应用到其他服务器的云锁时，可以通过导出的方式将其导出到指定的路径进行保存，方便下次的需要使用。 除此外还可以把日志中记录的IP直接加入到黑白名单中。 当需要对多个服务器设置同一套黑白名单时，则在批量管理中可以对多个服务器的黑白名单进行管理、导入等操作。 "},"manual/f24.html":{"url":"manual/f24.html","title":"“防端口扫描”功能防护","keywords":"","body":"“防端口扫描”功能防护 端口扫描是指利用TCP/UDP扫描工具检测服务器TCP端口的分配及提供的服务和它们的软件版本。 云锁“防端口扫描”功能通限制单个IP单位时间内允许扫描的端口数目来防止黑客通过端口扫描工具获取服务器敏感信息，而扫描的端口超过设置数目时则对扫描IP锁定一定时间。 “系统防护”中打开“防端口扫描”功能界面，即可根据自身服务器情况进行详细设置。云锁默认为10秒内扫描端口超过10个则锁定60分钟。 当服务器遭到扫描工具扫描时，在云中心会看到相关事件。 "},"manual/f25.html":{"url":"manual/f25.html","title":"“系统资源监控”功能说明","keywords":"","body":"“系统资源监控”功能说明 为了更方便的管理和维护服务器，云锁对服务器上的资源进行了监控，主要包括CPU、内存、磁盘、网络IO的监控。可以对服务器上的资源进行报警设置，当在一定时间内超过设定的阈值就会记录日志并在PC端弹出报警窗口。 CPU、内存和网络IO的使用率每6秒更新一次，持续展示120秒内的监控信息，而磁盘则展示每块磁盘的空间使用状况。开启报警监控后则可设置报警阈值，设置后则会看到报警线。 通过“工具箱”进入“系统资源监控”功能，开启该功能。 CPU使用率： 内存使用率： 磁盘： 网络IO： 当监控到服务器的性能值超过设定的阈值时，则会进行报警并将其记录在防护日志的监控日志中。 "},"manual/f26.html":{"url":"manual/f26.html","title":"“网站性能监控”功能说明","keywords":"","body":"“网站性能监控”功能说明 “网站性能监控”是对服务器上站点的并发连接数、PV、每秒请求数及出入网流量进行监控，并在超过阈值时告警。“网站性能监控”统计网站是按照域名统计的，会对网站的每一次访问和刷新都记录一次PV。当别人用自定义的host头，请求了服务器的时候也会被记录下来，所以有时会看到一些不属于自己的网站。 在“工具箱”打开“网站性能监控”功能，页面会展示有流量的网站； 当需要展示所有服务器上的网站时，则需要将“仅显示有流量的网站”取消。 点击“设置”可以对网站的并发连接数的阀值及是否弹出告警窗进行设置。 对不同的站点可以分别进行监控，这样流量不同的网站可根据实际流量状况进行监控报警；双击网站还可修改每秒请求数、每秒出入网流量的报警值。当网站的监控项超过报警值时则会进行报警并记录，可以在防护日志的监控日志中查看。 当网站的流量超过设置的阈值，则会记录在防护日志的监控日志中。 "},"manual/f27.html":{"url":"manual/f27.html","title":"“备份与还原”功能设置","keywords":"","body":"“备份与还原”功能设置 “备份与还原”是针对云锁对服务器配置的安全规则进行的备份和还原。当服务器环境出现问题需要还原，而不想重新配置一遍规则；这时可以先将规则备份保存在PC端，当服务器环境还原后，将备份的云锁规则还原就可以恢复服务器还原前的云锁配置状态了。同时该功能还适用于多个相同网站环境的服务器，只需要配置一台服务器的规则，备份一份出来还原到其它的服务器中，省去了配置每一台服务器云锁规则的重复性工作。 在设置中心-其它设置中，选择备份与还原。 勾选需要备份的功能模块的规则进行备份，选择要保存的路径进行保存。默认为所有功能规则全部备份。 还原网站服务器系统环境后，PC端登录云锁。进入备份与还原设置，点击还原，将备份的规则还原并重启客户端。 "},"manual/f28.html":{"url":"manual/f28.html","title":"“边界管理”功能说明","keywords":"","body":"“边界管理”功能说明 自动识别企业信息资产及其相关信息，通过拓扑图展现服务器业务类型与访问关系，通过业务拓扑图能细粒度控制每台主机与外部及业务内部网络间的网络通信，有效防止攻击者入侵内部业务网络后的东西向移动（lateral movement），同时可自定义基于角色的访问控制策略，可帮助管理快速配置海量服务器的访问规则。演示视频：边界管理功能讲解 "},"manual/f29.html":{"url":"manual/f29.html","title":"“事件管理”功能说明","keywords":"","body":"“事件管理”功能说明 系统在风险识别、防御及威胁感知三个阶段都会产生安全事件，基于异常行为的检测技术，有效检测未知威胁，包括黑客渗透攻击、变形webshell、后门等攻击事件回溯，自动将安全事件从海量的日志中抽离并关联，回溯攻击过程并生成事件分析报告。提供对安全事件进行跟踪管理，帮助企业快速定位并修复黑客入侵时利用的风险点。包含事件列表、日志查询和告警设置功能。 事件列表 根据攻击时间列出所有服务器产生的事件，包括事件类型、事件摘要、产生事件的服务器、风险等级及处理状况。 通过事件的“查看报告”可以看到具体的事件详情。并且可以对攻击的IP等进行回溯，找到被利用的漏洞或者产生漏洞的页面。 在IOC的详情中可以看到详细的攻击过程。 日志查询 记录了对服务器的所有攻击行为及可疑操作，通过日志可以快速、有效的追溯到服务器或者网站被攻击的过程。 告警设置 对产生的事件设置告警，当有事件产生时，则根据设置好的告警策略进行推送。 通过页面对告警策略进行详细的设置和编辑。告警策略通过设置“时间间隔”、“时间段”、“告警方式（邮件、APP、短信、微信）”等向服务器、网站管理人员发送告警。 "},"faq/":{"url":"faq/","title":"常见问题","keywords":"","body":"常见问题 本章主要提供在使用云锁过程中常见的一些问题及解决方法。 "},"faq/q01.html":{"url":"faq/q01.html","title":"什么是云锁的服务端和客户端？","keywords":"","body":"什么是云锁的服务器端和客户端？ 服务器端是安装在网站服务器上，安装完成后只有进程在运行，需要PC端进行管理。 客户端是安装在用户所经常使用的PC机上，通过控制台界面登录到服务端进行云锁的设置与管理。 这样的管理方式是为了更好地减少软件占用网站服务器本身的资源，同时也尽可避免在无法远程连接到网站服务器时无法进行管理的问题。 "},"faq/q02.html":{"url":"faq/q02.html","title":"安装云锁时被杀毒软件误报的问题","keywords":"","body":"安装云锁时被杀毒软件误报的问题 云锁是具有安全产品检测中心认证和微软签名的安全产品，用户在官网下载的安装包是不会存在病毒和其它安全风险的。之所以被杀毒软件误报是因为云锁采用了操作系统内核加固技术保护服务器，安装时需要安装驱动程序，当遇到杀毒软件会弹出拦截提示时，点击允许即可。 "},"faq/q03.html":{"url":"faq/q03.html","title":"云锁会否拦截蜘蛛和CDN？","keywords":"","body":"云锁会否拦截蜘蛛和CDN？ 云锁目前内置了百度云加速、360、阿里云CDN、牛盾、上海云盾、加速乐、dnspod、安全宝、网宿、蓝汛、又拍云、CloudFlare(国外)、Incapdns、这些CDN节点的IP名单，并且会定期更新。部分小众的CDN节点IP可以发给我们（QQ：442550207），我们会在新的版本中进行更新。同时云锁支持“自定义CDN”功能，可以将自定义的CDN和负载等IP加到其中。 "},"faq/q04.html":{"url":"faq/q04.html","title":"CC基本设置的含义","keywords":"","body":"CC基本设置的含义 CC防护基本设置是一个阈值，是指当用户在60s访问请求数超过用户设置的200次时，就会触发云锁的CC防御机制，该IP会被锁定20分钟，这段时间内该IP无法访问该页面。如果发现是正常的访客浏览行为，云锁则不进行拦截。 "},"faq/q05.html":{"url":"faq/q05.html","title":"云锁安装失败，无法再次安装或卸载时的解决方法","keywords":"","body":"云锁安装失败，无法再次安装或卸载时的解决方法 云锁卸载错误导致无法通过“添加删除程序”卸载时，则需要手工进行卸载。具体卸载方法如下： 1.cmd下执行以下命令： sc stop yunsuoagent sc delete yunsuoagent sc stop yunsuodaemon sc delete yunsuodaemon sc delete resguard sc delete resguard2 sc delete secmodel 2.删除云锁安装目录 3.重启服务器 "},"faq/q06.html":{"url":"faq/q06.html","title":"云锁升级相关的问题","keywords":"","body":"云锁升级相关的问题 云锁是采用远程端管理方式，所以在确认更新后，其实是把更新命令发送到服务器端，等待服务器端下载升级包并执行升级动作，升级完成后版本号就会更新为最新版本。在更新服务器端其间，客户端开启会看到与服务器端断开连接一段时间后自动连接。而且升级程序会自动检测将更新文件更新到旧的目录，同时覆盖安装是不会影响之前云锁的规则配置。 "},"faq/q07.html":{"url":"faq/q07.html","title":"PC端提示“服务器端连接失败”可能导致的原因","keywords":"","body":"提示“服务器端连接失败”可能导致的原因 用户在使用PC端绑定或登录时，有时会弹出“服务器端连接失败”的提示。针对这个问题云锁的工程狮给出了导致问题的原因和解决方案。具体原因及方案如下： 未安装云锁服务器端，在服务器上安装云锁的服务器端即可；具体安装步骤请看查看云锁官网的“安装说明” 防火墙（软防和硬防）拦截，需要将云锁连接的端口添加到白名单；将云锁端口添加到防火墙的方法请查看“将云锁的5555端口加入到防火墙的方法”。硬件防火墙需联系相关管理人员将对应端口开放。 服务端IP输入错误服务器端IP输入错误，VPS共享IP用户请确认是否填写了映射的端口；设置共享IP的映射端口的方法请查看“VPS共享IP用户登录失败的问题” 服务器端云锁服务停止运行，Windows环境则在服务管理器中启动云锁服务即可；Linux环境则使用命令/etc/init.d/yunsuo start或者service yunsuo start命令启动云锁服务 PC端与服务器端的网络断开导致，使网络保持畅通即可 检查是否云主机本身有防火墙，拦截了云锁的端口（部分较早的云主机会有该问题），如拦截将5555端口添加到白名单即可。 如上述方法依旧无法连接到服务器，可以将服务器绑定到云中心账号，使用云中心账号登录PC端进行管理。请参照：“添加服务器”操作说明 "},"faq/q08.html":{"url":"faq/q08.html","title":"云锁安装后会影响服务器、网站性能吗？","keywords":"","body":"云锁安装后会影响服务器、网站性能吗？ 云锁采用远程端管理方式和驱动级防护，在服务器只需要安装“服务器端”，所以对服务器上资源占用非常低；与此同时，云锁会自动识别网站服务器的WEB中间件类型及网站路径，并对网站进行安全防护。 "},"faq/q09.html":{"url":"faq/q09.html","title":"VPS共享IP为什么登录服务器端失败？","keywords":"","body":"VPS共享IP为什么登录服务器端失败？ 因为云锁的PC是默认通过5555端口连接服务器端，登录时需要在服务器端将端口号改为VPS开放的端口号或者将VPS内部端口5555映射到任意外部端口，然后通过IP:52035的方式连接云锁。 如果依旧不能登录，尝试在防火墙的入站规则将外部端口加为白名单。 "},"faq/q10.html":{"url":"faq/q10.html","title":"云锁PC端关闭后，服务器端还会继续运行吗？","keywords":"","body":"云锁PC端关闭后，服务器端还会继续运行吗？ 云锁PC端是用来设置、管理服务器端的，PC端关闭后不会影响服务器端的正常运行，服务器端的各项防护都正常有效。 "},"faq/q11.html":{"url":"faq/q11.html","title":"云锁支持虚拟空间吗？","keywords":"","body":"云锁支持虚拟空间吗？ 云锁目前只支持独立的操作系统，不支持虚拟空间。 "},"faq/q12.html":{"url":"faq/q12.html","title":"云锁可以管理多个服务器吗？","keywords":"","body":"云锁可以管理多个服务器吗？ 云锁可以单机登录管理和云中心账户登录管理，单机登录则对服务器进行一对一的管理。云中心账户登录管理则将安装云锁的服务云中心账户绑定即可实现多个服务器的管理。 "},"faq/q13.html":{"url":"faq/q13.html","title":"PC端提示“请求被过滤”的问题","keywords":"","body":"PC端无法连接服务器端的问题 PC端与服务器连接时，有时会遇到一些问题导致与服务器连接中断，以下列出几种常见问题提示及解决方法。 PC端提示“请求被过滤”的问题 PC端提示“命令被撤销”的问题 PC端提示“通道选择器没有找到指定通道”的问题 PC端提示“服务端连接被断开”的问题 PC端提示“请求被过滤”的问题 一般出现在界面开启过程中，和服务器断开连接的时候，界面还未登录，就有另外一个操作去执行请求，因为服务器端设置必须登录成功后才允许操作，所以会返回这个错误。 PC端提示“命令被撤销”的问题 命令被撤销是由于网络环境不稳定导致突然中断，而在中断的同时有指令继续发送，发送未成功弹出的提示信息。出现该问题关闭PC端重新连接即可。 PC端提示“通道选择器没有找到指定通道”的问题\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000 PC端批量管理进入具体服务器有时会弹出“通道选择器没有找到指定通道”的提示。通常出现这个问题是因为网络不稳定的原因使服务器和云中心的通讯验证失败导致的，重启一下云锁服务器端服务，让云锁服务器和云中心重新验证通讯验证一下即可。 Windows进入服务管理器在云锁服务选择重启； Linux输入service yunsuo restart。 PC端提示“服务端连接被断开”的问题 PC端连接或添加服务器时会提示“服务端连接被断开”，这通常是由以下几个原因导致的： 端口填写错误切该端口正被其它应用使用，如22,3389等 安装云锁的时候端口号改成了被其它应用使用的端口 出现第1个问题的情况，则把填写的端口改为默认的5555即可；出现第2个问题则把云锁的端口改回默认端口5555或未被使用的端口。修改端口方法c参考：怎样修改云锁服务器端的端口号？ "},"faq/q14.html":{"url":"faq/q14.html","title":"卸载云锁网站无法访问的问题","keywords":"","body":"卸载云锁网站无法访问的问题 卸载云锁后遇到网站打不开问题，在IIS6上请检查IIS 筛选器、IIS通配符应用程序映射以及Web服务扩展这3个地方是否存在云锁插件。 ISAPI筛选器 IIS通配符应用程序映射 Web服务扩展 在IIS7和IIS8上请检查IIS模块里是否含有云锁插件 IIS模块 在Apache上检查配置文件httpd.conf是否还有云锁插件配置信息 如果存在则删除这些插件重启IIS或Apache服务即可。 "},"faq/q15.html":{"url":"faq/q15.html","title":"云锁安装后部分功能未生效的问题","keywords":"","body":"使用时Web防护不生效或网站监控获取不到网站的问题 云锁使用过程中发现Web防护不生效，或者网站性能监控中获取不到网站了的问题。该问题通常是“Web防护”未开启导致的，通过PC控制端打开“应用防护”界面，开启“Web防护”功能即可。 "},"faq/q16.html":{"url":"faq/q16.html","title":"“敏感词过滤”出现不生效的问题","keywords":"","body":"“敏感词过滤”出现不生效的问题 云锁为了不影响网站访问的效率，对开启了GZIP压缩的网站未进行过滤。如非GZIP压缩的网站敏感内容过滤失效的问题请联系云锁的技术人员或通过论坛进行反馈。 "},"faq/q17.html":{"url":"faq/q17.html","title":"WDCP卸载云锁后，后台登录失败的问题","keywords":"","body":"WDCP卸载云锁后，后台登录失败的问题 可能是卸载云锁导致WDCP后台的Apache停止运行导致的，重新启动一下wdcp后台的Apache程序即可。启动命令：/www/wdlinux/wdapache/bin/httpd –k start "},"faq/q18.html":{"url":"faq/q18.html","title":"云锁忘记九宫格密码怎么办？","keywords":"","body":"云锁忘记九宫格密码怎么办？ 将服务器绑定至云中心账号下，即可无需九宫格密码管理服务器，如仍需对九宫格密码进行处理则可参照下列方法。 Windows 方法一： 覆盖安装服务器端，并将服务器绑定到云中心账号下。 通过云中心账号登录，打开需要处理九宫格密码的服务器，关闭“自身防护功能”。 将云锁目录下\\\\...\\YunSuo\\YunsuoAgent\\config\\other\\yunsuo_config_other.xml文件里的1的1改为0 方法二： 卸载服务器端重新安装 Linux 方法一： 登录服务器，通过脚本/usr/local/yunsuo_agent/agent_smart_tool.sh将服务器绑定到云中心账号，具体绑定方法参照：“添加服务器”操作说明的Linux服务器端添加。 通过云中心账号登录，打开需要处理九宫格密码的服务器，关闭“自身防护功能”。 vim /usr/local/yunsuo_agent/config/other/yunsuo_config_other.xml 将文件内的1的1改为0，改完后保存退出 方法二： 卸载服务器端重新安装 /usr/local/yunsu_agent/uninstall "},"faq/q19.html":{"url":"faq/q19.html","title":"Linux安装云锁提示“Detected SElinux opening,close and then install”的问题","keywords":"","body":"Linux安装云锁报错的问题及解决方法 提示“Detected SElinux opening,close and then install”的问题 提示该问题是因为系统的Selinux未关闭，Selinux开启的状况下会影响云锁的安装与使用，所以需要关闭Selinux才可以安装。 关闭SELinux的方法： 方法一：vim /etc/selinux/config文件中的SELINUX=“enforcing”改为disabled ，按住shift键+：wq退出，然后（reboot）重启。 方法二：在lilo或者grub的启动参数中增加：selinux=0,也可以关闭selinux vim /boot/grub/grub.conf，将selinux=1改为selinux=0。保存退出后reboot重启系统。 重启后查看selinux状态： # getenforce 停在“extract compression package”无法继续安装的问题 在安装云锁Linux版本时，安装运行到“extract compression package”无法继续安装。 主要是由于系统字符集设置导致的，此时将系统默认字符集临时改为C语言，再次执行安装即可。 ``` 按“Ctrl + c”结束安装 export LC_ALL=C # 将系统语言环境临时转为C语言 yunsuo # 再次安装云锁 "},"faq/q20.html":{"url":"faq/q20.html","title":"将云锁的端口添加到防火墙的方法","keywords":"","body":"将云锁的端口添加到防火墙的方法 Windows Linux Windows： 打开防火墙高级设置 “入站规则”处选择“新建规则”，将云锁端口添加到防火墙 Linux： 编辑iptables文件，vi /etc/sysconfig/iptablse，添加如图所示规则，保存退出 -A INPUT –p tcp –m tcp –dprot 5555 –j ACCEPT -A INPUT –p udp –m udp –dprot 5555 –j ACCEPT -A OUTPUT –p tcp –m tcp –sprot 5555 –j ACCEPT -A OUTPUT –p udp –m udp –sprot 5555 –j ACCEPT 重启防火墙iptables；service iptables restart "},"faq/q21.html":{"url":"faq/q21.html","title":"怎样修改Linux服务器端的端口号？","keywords":"","body":"怎样修改服务器端的端口号？ 修改Windows服务器端端口号 修改Linux服务器端端口号 Windows 开始菜单“所有程序-云锁-云锁服务器端-修改监听端口”，或在云锁目录（...\\YunSuo\\YunSuoAgent\\）下执行YSTools.exe程序，修改端口号。 Linux 云锁的根目录/usr/local/yunsuo_agent/下有可执行脚本yunsuo_smart_tool.sh，执行该脚本即可修改Linux服务器端的端口号。通过参数h可以知道具体的修改方法。 # ./yunsuo_smart_tool.sh –h #查看工具yunsuo_smart_tool.sh帮助 # ./yunsuo_smart_tool.sh -u cloud_name -p cloud_passwd #添加云中心账户名和密码 # ./yunsuo_smart_tool.sh -l port #更新端口号 # ./yunsuo_smart_tool.sh -i port #添加端口号 # ./yunsuo_smart_tool.sh -d port #删除端口号 # ./yunsuo_smart_tool.sh -P proxy_server_ip #更新代理IP "},"faq/q22.html":{"url":"faq/q22.html","title":"网站性能监控下为什么多了其它的域名？","keywords":"","body":"网站性能监控下为什么多了其它的域名？ 这个首先要从正常访客使用浏览器访问一个网站的域名说起，假如你的域名是www.yunsuo.com.cn,那么正常访客提交的HTTP请求大概就是这样滴 GET /index.htm HTTP/1.1 Host: www.yunsuo.com.cn Content-Type: text/html 然后连接 www.yunsuo.com.cn 指向的IP地址，发送这段字符串，浏览器就可以接收数据了。 云锁按照网站统计流量，正是以这个Host字段中的值来区分不同的站的。 在网站性能监控数据里出现不属于自己的网站，正是由于别人使用了自己定义的Host字段所致，话说别人为啥要这么做呢 恶意解析，将大流量网站的域名解析到你的服务器上，造成网络拥堵。 工具探测，假设我现在想知道百度服务器的真正的IP地址，但是我只知道百度的域名，咋办呢，暴力搜索。 用程序这样提交数据 GET /index.htm HTTP/1.1 Host: www.baidu.com Content-Type: text/html 程序会在一个循环里连接所有可能的IP地址来探测，当对端服务器返回了正常的百度首页地址，则表示找到了他的IP地址。 一般来讲，这样的数据在网站性能监控里会很少，一天下来PV也没几次。如果发现一个不属于自己的网站，一天下来PV很高，那可能是遇到了第一种情况或是碰到了攻击行为。 "},"faq/q23.html":{"url":"faq/q23.html","title":"Linux密钥登录怎样登录云锁PC端","keywords":"","body":"Linux密钥登录怎样登录云锁PC端 用户管理Linux服务器时，为了安全都会使用密钥进行登录，而不是使用root密码登录，但是云锁登录却需要使用root密码进行登录管理。遇到这种情况可以先设置root密码，再修改ssh禁止使用密码登录系统，这样既可以登录云锁，也解决了ssh登录安全的问题。 Wdcp用户可以登录Wdcp面板，进入“安全管理”-“ssh管理”，修改私钥密码。修改私钥密码后再关闭“密码验证登录”，这样既不影响ssh的密钥登录也不影响云锁使用root密码登录。 非wdcp的用户，可以通过密钥方式登录系统，通过命令修改设置root登录密码。 # passwd 编辑ssh配置文件，将PasswordAuthentication 的yes改为no后:wq保存。 # vi /etc/ssh/sshd_config 重启ssh服务 /etc/init.d/sshd restart 或 service sshd restart "},"faq/q25.html":{"url":"faq/q25.html","title":"CC攻击设置高级首次访问验证通过后，以后访问还需要输入验证吗？","keywords":"","body":"CC攻击设置高级首次访问验证通过后，以后访问还需要输入验证吗？ 首次输入后再次访问是不需要输入验证的，直到程序再次检测到访问频率较高才会在访问是要求输入验证码。 "},"faq/q26.html":{"url":"faq/q26.html","title":"Nginx安装云锁Linux版本防护插件失败的问题 ","keywords":"","body":"Nginx安装云锁Linux版本防护插件失败的问题 Nginx参数中含有以下内容时需编译安装插件。 --add-module 、--with-file-aio 、--with-http_xslt_module 、--with-http_image_filter_module 、--with-http_geoip_module 、--with-http_perl_module 、--with-perl_modules_path 、--with-perl 、--with-google_perftools_module 、--add-dynamic-module 、--with-stream=dynamic ` “checking nginx”提示“Not Found” 产生该提示的原因主要有2个，一种是安装云锁Linux版本时Nginx未正常运行；另一种是Nginx加载了第三方模块。通过命令“nginx -V”查看是否有加载第三方模块。 “checking nginx”提示“Configure nginx failed,May this version is not supported” 产生该提示原因也有2个，一种为Nginx进行过二次开发；另一种是网络不稳定，导致Nginx防护插件下载失败，可以通过查看/usr/local/yunsuo_agent/runlog/update.log查看。 如果加载了第三方模块或者进行过二次编译，可以通过自编译带有yunsuo的模块来支持这2种情况。 “checking nginx”提示“ls: cannot access…” 因为当前系统Nginx本身异常或Nginx进程异常，重新调试或者重新安装Nginx后再次安装云锁。 "},"faq/q27.html":{"url":"faq/q27.html","title":"云锁开启“抗CC攻击”后，网站访问一直跳转的问题","keywords":"","body":"云锁开启“抗CC攻击”后，网站访问一直跳转的问题 用户在开启了“抗CC攻击”中级后，访问网站会出现一直重复跳转并会显示提示信息的问题。出现这样的状况一般提示信息中的状况导致的。 请确保浏览器没有禁止发送cookie的情况。 IE：打开Internet选项，隐私项的高级设置，检查是否接受Cookie。 Chrome：打开设置页面，在高级设置中找到隐私设置，检查内容设置中的Cookie是否被允许。 Firefox：打开选项，隐私项中检查是否接受Cookie。 请确保浏览器可以正常执行JavaScript脚本的情况 IE：打开Internet选项，隐私项的高级设置，检查是否运行执行JavaScript脚本。 Chrome：打开设置页面，在高级设置中找到隐私设置，检查JavaScript是否被允许运行。 Firefox：在地址栏输入about:config，打开的页面中输入javascript.enabled；查找到javascript.enabled后检查值是否为ture。 "},"faq/q28.html":{"url":"faq/q28.html","title":"PC端显示服务器离线的原因及解决办法","keywords":"","body":"PC端显示服务器离线的原因及解决办法 通常因为服务器与云锁云中心通信断开或与云中心前端服务器连接出现问题导致PC端显示服务器离线无法管理。 通过命令telnet api.yunsuo.com.cn 443检查服务器与云中心连接是否连通。如通则重启服务器的云锁服务； Windows：服务管理器重启云锁服务 Linux：service yunsuo restart 如不通则检查服务器与云锁云中心的网络连接，看防火墙是否开放443端口，或者云锁云中心的IP被拉入黑名单等。 "},"faq/q29.html":{"url":"faq/q29.html","title":"页面提示“您所提交的请求含有不合法参数”的问题","keywords":"","body":"页面提示“您所提交的请求含有不合法参数”的问题 访问别人的网站出现“您所提交的请求含有不合法的参数，已被网站管理员设置拦截”的提示，请联系网站管理员。出现该问题的原因是用户访问网站触发了云锁的拦截所致。 如果用户本身为服务器管理员，则查看云锁网站防护日志，确认具体的拦截规则，将其关闭即可。如购买的是空间，则联系空间商解决。 用户更新后台、数据库、或者其他涉及数据库操作遇到此提示，建议添加自己IP到白名单；如果仍然不能解决，则暂停云锁的网站漏洞防护功能，即可解决。 "},"faq/q30.html":{"url":"faq/q30.html","title":"云锁安装后为什么功能不全？","keywords":"","body":"云锁安装后为什么功能不全？ 部分用户安装完云锁，通过PC端登录发现功能不全，缺少了操作系统加固、自身防护等功能。 这种情况通常会出现在Linux的服务器上，出现该情况后先通过uname -a查看系统内核版本，参照Linux支持内核版本看云锁是否支持当前系统的内核版本。如不支持则等待产品更新支持的内核版本（linode主机暂无法支持），如支持则按以下步骤进行操作。 查看云锁目录/usr/local/yunsuo_agent/下是否存在resguard_linux.ko、secmodel_linux.ko这2个模块(ls *.ko)，如存在用命令service yunsuo restart重启一下云锁服务，PC端重新连接服务器即可。 如不存在上述2个模块则可能是在安装过程中由于网络或者其它原因导致模块没有下载成功。云锁会在2小时后进行检查，发现模块不存在则自动下载并安装，此时用PC端重新连接即可。如不愿等待2小时则可以选择卸载重装。 "},"faq/q31.html":{"url":"faq/q31.html","title":"为什么云中心的风险评分与巡检的分数不一致？","keywords":"","body":"为什么云中心的风险评分与巡检的分数不一致？ 云锁的小伙伴巡检后发现云中心显示的分数和PC端巡检后的分数不一致，这是因为云中心统计的风险评分，是由巡检分数和事件分数两部分组成的。巡检分数是基础分，每产生一个事件就会减去相应事件的分数，直到分数为0；未巡检时不会显示分数。 而分数变化则是指当天和前一天事件分数的变化，新增一个事件就会减掉这个事件相应的分数，处理一个事件则会增加这个事件相应的分数。 "},"faq/q32.html":{"url":"faq/q32.html","title":"怎样清除卸载密码？","keywords":"","body":"怎样清除卸载密码？ 云锁为了防止攻击者恶意卸载云锁服务器端，提供了设置卸载密码的功能，如果忘记了该密码怎么办？下面云锁的工程狮告诉大家忘记了卸载密码该怎么解决。 其实解决的方法很简单，登录云锁的PC端，打开服务器的设置功能，在其它设置项中将卸载密码清空即可。 "},"faq/q33.html":{"url":"faq/q33.html","title":"云锁服务器端进程停了，防护还生效么？","keywords":"","body":"云锁服务器端进程停了，防护还生效么？ 云锁进程主要是用来与云中心和PC端进行通信和数据传输的，进程停了后不会影云锁的正常防护，当进程恢复后会自动恢复与云中心的数据通信和传输。 "}}